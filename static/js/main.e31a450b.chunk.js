(this.webpackJsonpapex2021=this.webpackJsonpapex2021||[]).push([[0],Array(116).concat([function(e,t,n){},,,,,,,,,function(e,t,n){var a={"./After_School_Club_16_9.png":126,"./Burst_Of_Energy_16_9.png":127,"./Fatigue_16_9.png":128,"./Haunted_Memory_16_9.png":129,"./Healthy_Food_16_9.png":130,"./Homework_16_9.png":131,"./Jacket_16_9.png":132,"./Junk_Food_16_9.png":133,"./Money_Bill_16_9.png":134,"./Money_Coin_16_9.png":135,"./Music_16_9.png":136,"./Music_Club_16_9.png":137,"./Olympus_16_9.png":138,"./Overnight_Study_16_9.png":139,"./Procrastination_16_9.png":140,"./Read_For_Fun_16_9.png":141,"./Shopping_16_9.png":142,"./Sneaker_16_9.png":143,"./Study__Creative_Writing_16_9.png":144,"./Study__Math_16_9.png":145,"./Study__Online_Lecture_16_9.png":146,"./Study__Science_16_9.png":147,"./Study__Textbook_16_9.png":148,"./Therapist_16_9.png":149,"./Workout_16_9.png":150};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=125},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/After_School_Club_16_9.427a8241.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Burst_Of_Energy_16_9.7b50efa3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Fatigue_16_9.ddf351a2.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Haunted_Memory_16_9.6a4b4642.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Healthy_Food_16_9.c12c71bd.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Homework_16_9.43c63319.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Jacket_16_9.da6ec28b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Junk_Food_16_9.53d3b064.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Money_Bill_16_9.6daf705f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Money_Coin_16_9.da6bb9ad.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Music_16_9.d09f8b6d.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Music_Club_16_9.24ecd1c0.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Olympus_16_9.49c623fa.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Overnight_Study_16_9.8edb1790.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Procrastination_16_9.ff966c1f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Read_For_Fun_16_9.3e7211ad.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Shopping_16_9.295e2aa1.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Sneaker_16_9.7c8a1986.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Study__Creative_Writing_16_9.be6f40c3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Study__Math_16_9.3389142a.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Study__Online_Lecture_16_9.2ec9496d.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Study__Science_16_9.0f303817.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Study__Textbook_16_9.1cd9f61b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Therapist_16_9.08609e53.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Workout_16_9.568dfcf4.png"},function(e,t,n){var a={"./Bedroom_3_2.png":152,"./Christmas_3_2.png":153,"./Dad_Business_Struggle_3_2.png":154,"./Exam_3_2.png":155,"./Hospital_3_2.png":156,"./Middle_School_Graduation_3_2.png":157,"./Mom_Sick_3_2.png":158,"./NYC_Travel_3_2.png":159,"./Premonition_3_2.png":160,"./Prepare_For_School_3_2.png":161,"./Prom_3_2.png":162,"./School_3_2.png":163,"./School_Cold_3_2.png":164,"./School_Warm_3_2.png":165,"./Spring_Break_3_2.png":166,"./You_Failed_3_2.png":167};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=151},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Bedroom_3_2.46acfd78.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Christmas_3_2.1ec528f9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Dad_Business_Struggle_3_2.9ddd561a.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Exam_3_2.c05c99f4.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Hospital_3_2.702d3662.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Middle_School_Graduation_3_2.f2b63314.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Mom_Sick_3_2.3b40411f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/NYC_Travel_3_2.d1485c00.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Premonition_3_2.eb11be44.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Prepare_For_School_3_2.1eaad7e9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Prom_3_2.8e578607.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/School_3_2.2171d059.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/School_Cold_3_2.757be9b5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/School_Warm_3_2.791bf1e6.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/Spring_Break_3_2.1e319ef5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/You_Failed_3_2.1d8d33cb.png"},function(e,t,n){var a={"./af.mp3":169,"./da.mp3":170};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=168},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/af.a1c157c0.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/da.5ac41aaa.mp3"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(22),s=n.n(r),i=n(32),o=(n(115),n(116),n(17)),d=n(2),u=n(10),l=n(108),j=8,b="/apex2021",h="Opportunities",p="Hand",O="Deck",f="Discard Pile",g=function(e,t){if(e.hand.length>=j)return!1;if(e.deck.length<=0)for(;e.discard.length>0;)e.deck.push(e.discard.pop());return!(e.deck.length<=0)&&(e.hand.push(e.deck.pop()),!0)},m={displayName:null,displayNameInShop:null,image:null,description:"<FLAVOR>",moneyCost:0,energyCost:0,producesGrowthMindset:0,producesMoney:0,producesAttention:0,producesEnergy:0,producesStudyPoints:0,drawsCards:0,discardsCards:0,gainsCards:[],forgetsOnDiscard:!1,forgetsSelf:!1,forgetsCards:0,perform:function(e,t){if(e.energy<=0)return!1;e.energy--,e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+this.producesGrowthMindset),e.money+=this.producesMoney,e.attention+=this.producesAttention,e.energy+=this.producesEnergy,e.studyPoints+=this.producesStudyPoints;for(var n=0;n<this.drawsCards;n++)g(e);return this.discardsCards>0&&e.hand.length>0&&(e.cardsLeftToDiscard=this.discardsCards,t.events.setStage("discard")),this.forgetsCards>0&&e.hand.length>0&&(e.cardsLeftToForget=this.forgetsCards,t.events.setStage("forget")),this.gainsCards.forEach((function(t){return e.discard.push(t)})),!0},buy:function(e,t){return!(e.attention<=0||e.money<this.moneyCost||e.energy<this.energyCost)&&(e.attention--,e.money-=this.moneyCost,e.energy-=this.energyCost,e.discard.push(this.id),!0)}},x=[{id:"Card01",displayName:"Card1",description:"Make sure to play this every turn!",producesGrowthMindset:1},{id:"Card02",displayName:"Card2",description:"Getting money lets you buy stuff.",producesMoney:1,producesEnergy:1},{id:"Card03",displayName:"Card3",description:"Sometimes you just want to forget everything.",moneyCost:2,forgetsSelf:!0,forgetsCards:j},{id:"Card04",displayName:"Card4",description:"If you play this, you'll have to pick another card in your hand to discard.",moneyCost:2,drawsCards:3,discardsCards:1},{id:"Card05",displayName:"Card5",description:"Doing too much can make you tired.",moneyCost:2,producesGrowthMindset:1,producesMoney:1,producesEnergy:1,drawsCards:1,gainsCards:["fatigue"]},{id:"Card06",displayName:"Card6",description:"More energy means you can play more actions!",moneyCost:3,producesEnergy:2,drawsCards:1},{id:"Card07",displayName:"Card7",description:"IDK",moneyCost:3},{id:"Card08",displayName:"Card8",description:"IDK",moneyCost:4},{id:"Card09",displayName:"Card9",description:"More money",moneyCost:4,producesMoney:2,producesEnergy:1},{id:"Card10",displayName:"Card10",description:"That's a lot of energy.",moneyCost:4,producesAttention:1,producesEnergy:4},{id:"Card11",displayName:"Card11",description:"Maybe there are better options.",moneyCost:5,producesEnergy:1,drawsCards:2},{id:"Card12",displayName:"Card12",description:"More more money",moneyCost:6,producesMoney:3,producesEnergy:1},{id:"fatigue",displayName:"Fatigue",description:"Better rest up or I'll just get even more tired later.",forgetsSelf:!0},{id:"summerHomework",displayName:"Summer Homework",description:"So tedious...",producesGrowthMindset:1,forgetsSelf:!0,forgetsOnDiscard:!0}].map((function(e){return Object(d.a)(Object(d.a)({},m),e)})),v=function(e){return Object(d.a)(Object(d.a)(Object(d.a)({},m),e),{displayNameInShop:e.displayNameInShop?e.displayNameInShop:e.displayName})},y=x.reduce((function(e,t){return e[t.id]=t,e}),{}),_=function(e){var t=e.initialActions;return{name:"actions",setup:function(){return{actions:t}},api:function(e){e.ctx;var t=e.data;return{getActions:function(){var e={};for(var n in t.actions)e[n]=this.getAction(n);return e},getAction:function(e){return v(t.actions[e])}}}}},C=y,S=n(19),w={displayName:null,image:null,song:null,description:"<FLAVOR>",clearsShop:!1,studyPointsThreshold:0,engrossedTurns:0,inspiredTurns:0,indebtedTurns:0,energizedTurns:0,addsCardsToShop:[],addsCardsToDiscardPile:[],apply:function(e,t){this.inspiredTurns>0&&(e.statuses.inspired=Math.max(e.statuses.inspired||0,this.inspiredTurns)),this.energizedTurns>0&&(e.statuses.energized=Math.max(e.statuses.energized||0,this.energizedTurns)),this.engrossedTurns>0&&(e.statuses.engrossed=Math.max(e.statuses.engrossed||0,this.engrossedTurns)),this.indebtedTurns>0&&(e.statuses.indebted=Math.max(e.statuses.indebted||0,this.indebtedTurns)),this.clearsShop&&e.actionShop.splice(0,e.actionShop.length);var n,a=Object(S.a)(this.addsCardsToShop);try{for(a.s();!(n=a.n()).done;){var c=n.value;e.actionShop.push(c)}}catch(o){a.e(o)}finally{a.f()}var r,s=Object(S.a)(this.addsCardsToDiscardPile);try{for(s.s();!(r=s.n()).done;){var i=r.value;e.discard.push(i)}}catch(o){s.e(o)}finally{s.f()}}},k=[{id:"SummerStart",image:"middle_school_graduation.png",song:"af.mp3",displayName:"Congratulations",description:"After a long year, you've finally graduated from middle school.",inspiredTurns:2,energizedTurns:2,addsCardsToDiscardPile:["summerHomework","summerHomework","Card01"]},{id:"SchoolStart",image:"welcome_back.png",song:"da.mp3",displayName:"High School Begins",description:"And just like that High School begins.",addsCardsToDiscardPile:["Card02","Card02","Card02","Card02","Card02","Card01","Card01"],addsCardsToShop:["Card02","Card02","Card04","Card05"]}].map((function(e){return Object(d.a)(Object(d.a)({},w),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),N=n(12),E=n(14),I=function(){function e(t){Object(N.a)(this,e),this.eventsByDay=t||{}}return Object(E.a)(e,[{key:"addEvent",value:function(e,t){e in this.eventsByDay||(this.eventsByDay[e]=[]),this.eventsByDay[e].push(t)}},{key:"getEvents",value:function(e){return e in this.eventsByDay?this.eventsByDay[e]:[]}}]),e}(),T=function(e){var t=e.initialSchedule,n=e.initialEvents;return{name:"schedule",setup:function(){return{schedule:t,events:n}},api:function(e){var t=e.ctx,n=e.data;return{getCurrentEvents:function(){var e=this;return new I(n.schedule).getEvents(t.turn).map((function(t){return{id:t,event:e.getEvent(t)}}))},addEvent:function(e,t){new I(n.schedule).addEvent(e,t)},getEvents:function(){var e={};for(var t in n.events)e[t]=this.getEvent(t);return e},getEvent:function(e){return Object(d.a)(Object(d.a)({},w),n.events[e])},getTurnsUntilNextExam:function(){for(var e=this,a=new I(n.schedule),c=t.turn+1;c<=48;c++){if(a.getEvents(c).some((function(t){return e.getEvent(t).studyPointsThreshold>0})))return c-t.turn}return null},getStudyThresholdForNextExam:function(){var e=new I(n.schedule),a=this.getTurnsUntilNextExam();if(null===a)return null;var c,r=t.turn+a,s=e.getEvents(r),i=Object(S.a)(s);try{for(i.s();!(c=i.n()).done;){var o=c.value,d=this.getEvent(o);if(d.studyPointsThreshold>0)return d.studyPointsThreshold}}catch(u){i.e(u)}finally{i.f()}return null},getRaw:function(){return n}}}}},M={0:["SummerStart"],2:["SchoolStart"]},P=Object(a.createContext)({}),F=n(5),A={displayName:null,image:null,description:"<FLAVOR>",apply:function(e,t){}},D=[{id:"energized",displayName:"Energized",description:"Gain an extra energy at the start of each turn.",apply:function(e,t){e.energy+=1}},{id:"inspired",displayName:"Inspired",description:"Nullify the usual loss of growth mindset at the start of each turn.",apply:function(e,t){e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+1)}},{id:"engrossed",displayName:"Engrossed",description:"Start the turn with 0 attention.",apply:function(e,t){e.attention-=1}},{id:"indebted",displayName:"Indebted",description:"Start the turn with -1 money.",apply:function(e,t){e.money-=1}}].map((function(e){return Object(d.a)(Object(d.a)({},A),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),L={actionShop:[].sort(),deck:[],hand:[],discard:[],growthMindsetPoints:1,cardsLeftToDiscard:0,cardsLeftToForget:0,statuses:{},currentEvent:null,backgroundImage:null,studyPoints:0},G={money:0,attention:1,energy:1};var z={setup:function(e,t){return Object(d.a)(Object(d.a)({},L),G)},moves:{performAction:function(e,t,n){var a=e.hand[n],c=t.actions.getAction(a);if(e.hand.splice(n,1),!c.perform(e,t))return e.hand.splice(n,0,a),F.t;c.forgetsSelf||e.discard.push(a)},buyAction:function(e,t,n){var a=e.actionShop[n];if(!t.actions.getAction(a).buy(e,t))return F.t;e.actionShop.splice(n,1)},endTurn:function(e,t){t.events.endTurn()}},turn:{activePlayers:{all:"showEvent"},onBegin:function(e,t){return function(e,t){console.log(t);var n=t.schedule.getCurrentEvents();for(console.log(n),n.forEach((function(n){var a=n.id;n.event.apply(e,t),e.currentEvent=a})),0===n.length&&t.events.endStage();e.hand.length>0;){var a=e.hand.pop();t.actions.getAction(a).forgetsOnDiscard||e.discard.push(a)}for(var c=Math.min(5,e.growthMindsetPoints),r=0;r<c;r++)g(e);Object.assign(e,G),e.growthMindsetPoints--;for(var s=0,i=Object.entries(e.statuses);s<i.length;s++){var o=Object(u.a)(i[s],2),d=o[0],l=o[1];console.log(d,l),l>0?(D[d].apply(e,t),e.statuses[d]--):delete e.statuses[d]}}(e,t)},onEnd:function(e,t){e.growthMindsetPoints<=0&&t.events.endGame("fixed-mindset")},stages:{showEvent:{moves:{chooseOption:function(e,t,n){},dismiss:function(e,t){e.backgroundImage=t.schedule.getEvent(e.currentEvent).image,e.currentEvent=null,t.events.endStage()}}},discard:{moves:{discardAction:function(e,t,n){console.log(e.cardsLeftToDiscard);var a=e.hand[n];e.hand.splice(n,1),e.discard.push(a),0===e.hand.length?e.cardsLeftToDiscard=0:e.cardsLeftToDiscard--,e.cardsLeftToDiscard<=0&&t.events.endStage()}}},forget:{moves:{forgetAction:function(e,t,n){console.log(e.cardsLeftToForget),e.hand.splice(n,1),0===e.hand.length?e.cardsLeftToForget=0:e.cardsLeftToForget--,e.cardsLeftToForget<=0&&t.events.endStage()}}}}}},B=n(18),H=n(223),U=n(227),K=n(224),R=n(225),J=n(221),V=n(222),W=n(105),Y=c.a.createContext({}),q=n(219),$=n(218),Z=n(220),Q=n(217),X=n(226),ee=n(1);function te(e){return e+" "+(e>1?"cards":"card")}var ne=function(e){var t=e.description,n=e.runEffect,c=e.className,r=e.passthrough;return Object(a.useEffect)((function(){n&&n()})),Object(ee.jsx)(Q.a,Object(d.a)(Object(d.a)({id:"keyword-description",className:c},r),{},{children:t}))},ae=function(e){var t=e.children,n=e.description,a=e.tooltipClassName,c=e.runEffect;return Object(ee.jsx)(X.a,{placement:"right",overlay:function(e){return Object(ee.jsx)(ne,{description:n,className:a,runEffect:c,passthrough:e})},children:Object(ee.jsx)("span",{className:"card-keyword",children:t})})},ce=function(e){var t=e.number;return Object(ee.jsx)(ae,{description:"Place cards from your hand into your discard pile until you have placed "+te(t)+" or your hand is empty.",children:"Discard "+t})},re=function(e){var t=e.number;return Object(ee.jsx)(ae,{description:"Place "+te(t)+" from your deck into your hand. If your deck is empty, your discard pile will automatically be shuffled into your deck.",children:"Draw "+t})},se=function(e){var t=e.number;return Object(ee.jsx)(ae,{description:"Permanently remove cards from your hand until you have removed "+te(t)+" or your hand is empty.",children:"Forget "+t})},ie=function(){return Object(ee.jsx)(ae,{description:"Permanently remove this card from your hand upon being played.",children:"Forget Self"})},oe=function(e){var t=e.cardId,n=e.renderCard,c=e.tooltipClassName,r=e.runEffect,s=Object(a.useContext)(Y).actions,i=n(Object(d.a)({cardId:t,onClick:function(e){}},s[t]));return Object(ee.jsx)(ae,{description:i,tooltipClassName:c,runEffect:r,children:"Gain "+s[t].displayName})},de=function(e){var t=e.number;return Object(ee.jsx)(ae,{description:"Growth Mindset represents the number of cards you can draw at the beginning of the next turn. You lose one point per turn, and Growth Mindset is capped at 5.",children:"+"+t+" Growth Mindset"})},ue=function(e){var t=e.number;return Object(ee.jsx)(ae,{description:"Study Points are necessary to progress through the story. Prioritize obtaining actions with Study Points!",children:Object(ee.jsx)("span",{className:"study-points",children:"+"+t+" Study Points"})})},le=function(e){return Object(ee.jsx)(ae,{description:"If this card remains in your hand at the end of the turn, it will be permanently removed from your deck.",children:"#YOLO"})},je=function(e){return 1===e?"1 turn remaining":e+" turns remaining"},be=function(e){var t=Object(a.useContext)(Y).G,n="inspired"in t.statuses,c=n?" The Inspired status prevents Growth Mindset from decreasing while active.":"";return Object(ee.jsxs)(ae,{description:"Growth Mindset represents the number of cards you can draw at the beginning of the next turn. You lose one point per turn, and Growth Mindset is capped at 5."+c,children:["Growth Mindset ",n&&Object(ee.jsxs)($.a,{pill:!0,variant:"info",className:"status",children:["Inspired: ",je(t.statuses.inspired)]})]})},he=function(e){var t=Object(a.useContext)(Y).G,n="indebted"in t.statuses,c=n?" The Indebted status causes you to start with 1 fewer Money each turn.":"";return Object(ee.jsxs)(ae,{description:"Money is refreshed each turn and can be gained by performing certain actions. Most opportunities cost Money to obtain."+c,children:["Money ",n&&Object(ee.jsxs)($.a,{pill:!0,variant:"danger",className:"status",children:["Indebted: ",je(t.statuses.indebted)]})]})},pe=function(e){var t=Object(a.useContext)(Y).G,n="engrossed"in t.statuses,c=n?" The Engrossed status causes you to start with 1 fewer Attention each turn.":"";return Object(ee.jsxs)(ae,{description:"Attention represents the maximum number of opportunities you can obtain per turn."+c,children:["Attention ",n&&Object(ee.jsxs)($.a,{pill:!0,variant:"danger",className:"status",children:["Engrossed: ",je(t.statuses.engrossed)]})]})},Oe=function(e){var t=Object(a.useContext)(Y).G,n="energized"in t.statuses,c=n?" The Energized status causes you to start with 1 extra Energy each turn.":"";return Object(ee.jsxs)(ae,{description:"Energy represents the number of actions you can perform per turn. Some opportunities also cost Energy to obtain."+c,children:["Energy ",n&&Object(ee.jsxs)($.a,{pill:!0,variant:"info",className:"status",children:["Energized: ",je(t.statuses.energized)]})]})},fe=function(e){var t=Object(a.useContext)(Y).plugins.schedule.api.getStudyThresholdForNextExam(),n="point"+(t>1?"s":""),c=t?" The next exam will require ".concat(t," ").concat(n," to pass."):"";return Object(ee.jsxs)(ae,{description:"Study Points carry between turns and are necessary to pass events.".concat(c),children:["Story Points ",t&&Object(ee.jsxs)($.a,{pill:!0,variant:"warning",children:["Next Exam Target: ",t]})]})},ge=function(e){var t=Object(a.useContext)(Y).plugins,n=t.schedule.api.getTurnsUntilNextExam(),c=t.schedule.api.getStudyThresholdForNextExam(),r="point"+(c>1?"s":""),s=c?" The next exam will require ".concat(c," ").concat(r," to pass."):"";return Object(ee.jsxs)(ae,{description:"You have ".concat(48," turns to play in total.").concat(s),children:["Turn ",n&&Object(ee.jsxs)($.a,{pill:!0,variant:"warning",children:[n," until next exam"]})]})},me={0:"danger",1:"danger",2:"danger",3:"warning",4:"success",5:"info"};var xe=function(){var e=Object(a.useContext)(Y),t=e.G,n=e.ctx,c=e.plugins,r=t.growthMindsetPoints,s=t.money,i=t.attention,o=t.energy,d=t.studyPoints,u=c.schedule.api.getStudyThresholdForNextExam()||1;return Object(ee.jsxs)(q.a,{responsive:!0,bordered:!0,id:"player-info",children:[Object(ee.jsx)("thead",{children:Object(ee.jsxs)("tr",{className:"info-label-row",children:[Object(ee.jsx)("th",{children:Object(ee.jsx)(ge,{})}),Object(ee.jsx)("th",{children:Object(ee.jsx)(fe,{})}),Object(ee.jsx)("th",{children:Object(ee.jsx)(be,{})}),Object(ee.jsx)("th",{children:Object(ee.jsx)(he,{})}),Object(ee.jsx)("th",{children:Object(ee.jsx)(pe,{})}),Object(ee.jsx)("th",{children:Object(ee.jsx)(Oe,{})})]})}),Object(ee.jsx)("tbody",{children:Object(ee.jsxs)("tr",{className:"info-data-row",children:[Object(ee.jsx)("td",{children:Object(ee.jsx)($.a,{variant:"dark",children:n.turn})}),Object(ee.jsx)("td",{children:Object(ee.jsx)(Z.a,{now:d+.1,max:u+.1,label:d,animated:d>=u})}),Object(ee.jsx)("td",{children:Object(ee.jsx)(Z.a,{now:r,max:5,label:r,variant:me[r],animated:5===r})}),Object(ee.jsx)("td",{children:Object(ee.jsx)($.a,{variant:"warning",children:s})}),Object(ee.jsx)("td",{children:Object(ee.jsx)($.a,{variant:"primary",children:i})}),Object(ee.jsx)("td",{children:Object(ee.jsx)($.a,{variant:"success",children:o})})]})})]})},ve=n(15),ye=n(11),_e=n(229),Ce=n(230),Se=n(231),we=n(120),ke=n(6);function Ne(e){var t=e.children,n=Object(B.a)(e,["children"]),c=Object(a.useState)(0),r=Object(u.a)(c,2),s=r[0],i=r[1],o=Object(ee.jsx)(_e.a,{children:t.map((function(e,t){return Object(ee.jsx)(_e.a.Item,{active:t===s,onClick:function(){return i(t)},children:t+1},t+1)}))});return Object(ee.jsxs)("div",Object(d.a)(Object(d.a)({},n),{},{children:[t[s],o]}))}function Ee(e){var t=e.label,n=e.maxColumns,a=e.maxRows,c=e.children,r=Object(B.a)(e,["label","maxColumns","maxRows","children"]),s=we.chunk(c,n||4),i=we.chunk(s,a||1).map((function(e,t){return Object(ee.jsx)("div",{children:e.map((function(e,t){return Object(ee.jsx)(Ce.a,{horizontal:!0,className:"card-row",children:e.map((function(e){return Object(ee.jsx)(Ce.a.Item,{children:e})}))},t)}))},t)}));return console.log(i),Object(ee.jsxs)("div",Object(d.a)(Object(d.a)({},r),{},{children:[c.length>0&&t&&Object(ee.jsx)("p",{children:Object(ee.jsx)($.a,{children:t})}),s.length>(a||1)?Object(ee.jsx)(Ne,{children:i}):i]}))}function Ie(e){var t=e.cardId,n=Object(a.useContext)(Y).actions;return Object(ee.jsx)(Te,Object(d.a)(Object(d.a)({},e),n[t]))}function Te(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1],s=e.areaType,i=e.onClick,o=e.ref,d=e.gameStage,l=e.displayName,j=e.displayNameInShop,O=e.image,f=e.description,g=e.moneyCost,m=e.energyCost,x=e.producesGrowthMindset,v=e.producesMoney,y=e.producesAttention,_=e.producesEnergy,C=e.producesStudyPoints,S=e.drawsCards,w=e.discardsCards,k=e.gainsCards,N=e.forgetsOnDiscard,E=e.forgetsSelf,I=e.forgetsCards,T=s===p&&("discard"===d||"forget"===d),M=T?"danger":null,P=ke({"action-card":!0,"special-condition":T});return Object(ee.jsxs)(Se.a,{ref:o,onClick:i,onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},bg:M,border:c?"warning":"secondary",className:P,children:[Object(ee.jsx)(Se.a.Header,{children:Object(ee.jsx)(J.a,{fluid:!0,children:Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(W.a,{xs:4,className:"cost-label",children:"Makes:"}),Object(ee.jsx)(W.a,{xs:3}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"warning",children:v})}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"primary",children:y})}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"success",children:_})})]})})}),Object(ee.jsxs)(Se.a.Body,{children:[Object(ee.jsx)(Se.a.Title,{children:s===h&&j?j:l}),Object(ee.jsx)(Se.a.Img,{src:null!==O?"".concat(b,"/").concat(O):"".concat(b,"/images/card/Placeholder_16_9.svg"),className:"card-image"}),Object(ee.jsxs)(Ce.a,{className:"extra-rules",children:[x>0&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(de,{number:x})},"growth-mindset"),C>0&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(ue,{number:C})},"boost-study"),S>0&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(re,{number:S})},"draws-cards"),w>0&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(ce,{number:w})},"discards-cards"),N&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(le,{})},"forgets-on-discard"),E&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(ie,{})},"forgets-self"),I>0&&Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(se,{number:I})},"forgets-cards"),k.map((function(e,t){return Object(ee.jsx)(Ce.a.Item,{children:Object(ee.jsx)(oe,{cardId:e,renderCard:Te,tooltipClassName:"card-preview",runEffect:function(){}})},"gains-"+t)}))]}),Object(ee.jsx)(Se.a.Text,{className:"flavor",children:f})]}),Object(ee.jsx)(Se.a.Footer,{className:s,children:Object(ee.jsx)(J.a,{fluid:!0,children:Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(W.a,{xs:6,className:"cost-label",children:s===h?"To Obtain:":"Obtained For:"}),Object(ee.jsx)(W.a,{xs:1}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"warning",children:g})}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"primary",children:"1"})}),Object(ee.jsx)(W.a,{xs:1,children:Object(ee.jsx)($.a,{variant:"success",children:m})})]})})})]})}function Me(e){var t=e.actionsList,n=e.className,a=e.onClick,c=e.gameStage,r=t.map((function(e,t){return Object(ee.jsx)(Ie,{areaType:n,cardId:e,onClick:function(){return a(t)},gameStage:c},t)}));return Object(ee.jsx)(Ee,{className:"action-list-"+n,maxRows:2,children:r.length>0?r:Object(ee.jsx)($.a,{children:Object(ee.jsx)("h1",{children:"No Actions Available"})})},n)}var Pe=function(){var e,t=Object(a.useContext)(Y),n=t.G,c=t.ctx,r=t.moves,s=n.hand,i=n.actionShop,o=n.deck,d=n.discard,l=function(e){},j=c.activePlayers&&"discard"===c.activePlayers[c.playOrderPos],b=c.activePlayers&&"forget"===c.activePlayers[c.playOrderPos],g=j?"discard":b?"forget":null,m=(e={},Object(ve.a)(e,p,{actions:s,onClick:j?r.discardAction:b?r.forgetAction:r.performAction}),Object(ve.a)(e,h,{actions:i,onClick:j?l:r.buyAction}),Object(ve.a)(e,O,{actions:Object(ye.a)(o).sort(),onClick:l}),Object(ve.a)(e,f,{actions:d,onClick:l}),e),x=Object(a.useState)(p),v=Object(u.a)(x,2),y=v[0],_=v[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),w=S[0],k=S[1];Object(a.useEffect)((function(){i.length>0&&y!==h&&k(!0)}),[i,k]);var N=function(e){switch(e){case h:return Object(ee.jsxs)("p",{children:[e," ",w&&Object(ee.jsx)($.a,{variant:"info",children:"New"})]});default:return Object(ee.jsx)("p",{children:e})}},E=Object.keys(m).map((function(e){return Object(ee.jsx)(H.a,{eventKey:e,title:N(e),disabled:0===m[e].actions.length,children:Object(ee.jsx)(Me,{actionsList:m[e].actions,className:e,onClick:m[e].onClick,gameStage:g})},e)}));return Object(ee.jsx)("div",{className:"game-tabs",children:Object(ee.jsxs)(K.a,{id:"actions",activeKey:y,onSelect:function(e){return function(e){switch(_(e),e){case h:k(!1)}}(e)},children:[E,Object(ee.jsx)(H.a,{eventKey:"next-turn",title:"Next Turn",children:Object(ee.jsx)("div",{className:"confirm-next-turn",children:Object(ee.jsx)(R.a,{onClick:function(){r.endTurn(),_(p)},children:"Confirm End Turn"})})},"next-turn")]})})},Fe=function(e){var t=e.songUrl,n=Object(a.useState)(null),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.createRef)();return Object(a.useEffect)((function(){t!==r&&(i.current.pause(),i.current.src="".concat(b,"/").concat(t),i.current.play(),console.log("Switching song from: ".concat(r," to ").concat(i.current.src)),s(t))}),[r,i,t]),Object(ee.jsx)("audio",{ref:i,loop:!0})};function Ae(e){var t=e.actions,n=e.event,a=e.show,c=e.onHide,r=Object(B.a)(e,["actions","event","show","onHide"]),s=n.addsCardsToDiscardPile,i=n.addsCardsToShop,o=n.displayName,u=n.description,l=n.image,j={backgroundImage:null==l?null:"url(".concat(b,"/").concat(l,")"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},p=function(e,n,a){if(0===e.length)return[];var c=e.map((function(e,n){return Object(ee.jsx)(Te,Object(d.a)({areaType:a,cardId:e,onClick:function(){}},t[e]),n)}));return Object(ee.jsx)(H.a,{eventKey:n,title:a,children:Object(ee.jsx)(Ee,{children:c})})},O=p(s,"new-actions","Actions"),f=p(i,"new-opportunites",h);return Object(ee.jsxs)(U.a,Object(d.a)(Object(d.a)({size:"xl",show:a,onHide:c,style:j,className:"event-modal",centered:!0},r),{},{children:[Object(ee.jsx)(U.a.Header,{children:Object(ee.jsx)(U.a.Title,{children:o})}),Object(ee.jsxs)(U.a.Body,{className:"game-tabs",children:[Object(ee.jsx)("p",{children:u}),Object(ee.jsxs)(K.a,{children:[O,f]})]}),Object(ee.jsx)(U.a.Footer,{children:Object(ee.jsx)(R.a,{onClick:c,children:"Continue"})})]}))}function De(e){var t=Object(a.useContext)(Y),n=t.G,c=t.moves,r=t.actions,s=t.events,i=t.playSong,o=n.currentEvent in s,d=s[n.currentEvent];return Object(a.useEffect)((function(){d&&d.song&&o&&i(d.song)}),[d,i,o]),o?Object(ee.jsx)(Ae,{actions:r,event:d,show:o,onHide:function(){return c.dismiss()}}):Object(ee.jsx)(ee.Fragment,{})}var Le=function(e){var t=Object(a.useContext)(Y),n=t.G,c=t.ctx,r=t.moves,s=t.plugins,i=s.actions.api.getActions(),o=s.schedule.api.getEvents(),d=Object(a.useState)(null),l=Object(u.a)(d,2),j=l[0],h=l[1],p=n.backgroundImage,O={backgroundImage:null==p?null:"url(".concat(b,"/").concat(p,")"),backgroundSize:"cover"};return Object(ee.jsxs)(Y.Provider,{value:{G:n,ctx:c,moves:r,actions:i,plugins:s,events:o,songUrl:j,playSong:h},children:[Object(ee.jsx)("div",{style:O,id:"bg-container"}),Object(ee.jsxs)("div",{id:"game-wrapper",children:[Object(ee.jsxs)(J.a,{fluid:!0,id:"game-container",children:[Object(ee.jsx)(V.a,{children:Object(ee.jsx)(W.a,{children:Object(ee.jsx)(xe,{})})}),Object(ee.jsx)(V.a,{children:Object(ee.jsx)(W.a,{children:Object(ee.jsx)(Pe,{})})})]}),Object(ee.jsx)(De,{})]}),Object(ee.jsx)(Fe,{songUrl:j})]})},Ge=n(228),ze=n(109),Be=n(88),He=n(106),Ue=function(e,t,n){return Object.assign.apply(Object,[{}].concat(Object(ye.a)(e.keys().map((function(e){return function(e,t,n){var a=e.replace(/^\.\//,""),c="".concat(t,"/").concat(a);return Object(ve.a)({},c,{label:a,value:c,type:n})}(e,t,n)})))))},Ke=Ue(n(125),"images/card","img"),Re=Ue(n(151),"images/event","img"),Je=Ue(n(168),"songs","audio"),Ve=[].concat(Object(ye.a)(Object.values(Ke)),Object(ye.a)(Object.values(Re)),Object(ye.a)(Object.values(Je))).map((function(e){return Object(ve.a)({},e.value,e.type)}));console.log(Ke);var We=Object.assign.apply(Object,[{}].concat(Object(ye.a)(Ve)));console.log(We);var Ye=We,qe=Object(a.createContext)({});function $e(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(e){return e.toUpperCase()}))}function Ze(e){for(var t=e.actionId,n=e.eventId,c=Object(a.useContext)(qe),r=c.actions,s=c.setActions,i=c.events,o=c.setEvents,l=t||n,j=t?"action":"event",b=t?r[t]:i[n],h=t?r:i,p={},O=function(e,t){return"image"===e?"event"===j?"event-image":"card-image":"song"===e?"song":typeof t},f=function(){var e=m[g];p[e]=function(n,a){var c,r=h[l][e],i=O(e,r);switch(i){case"card-image":case"event-image":case"song":switch(a.action){case"deselect-option":case"clear":c=null;break;case"select-option":c=n.value;break;default:throw new Error("Don't know how to serialize ".concat(a.action,"."))}break;case"string":c=n.target.value;break;case"number":c=parseInt(n.target.value);break;case"boolean":c=n.target.checked;break;case"object":switch(a.action){case"deselect-option":c=[].concat(Object(ye.a)(r),[a.option.value]);break;case"remove-value":var u=a.removedValue.sequenceId;(c=Object(ye.a)(r)).splice(u,1);break;default:c=n.map((function(e){return e.value}))}break;default:throw new Error("Don't know how to serialize ".concat(i,"."))}var j=Object(d.a)(Object(d.a)({},h),Object(ve.a)({},l,Object(d.a)(Object(d.a)({},h[l]),{},Object(ve.a)({},e,c))));(t?s:o)(j)}},g=0,m=Object.keys(b);g<m.length;g++)f();var x=function(e,t){return Object(ee.jsx)(Be.a,{id:"".concat(l,".").concat(e),value:null===b[e]?null:t[b[e]],isClearable:!0,onChange:p[e],options:Object.values(t)})},v=Object.entries(b).filter((function(e){var t=Object(u.a)(e,2),n=t[0];return"function"!==typeof t[1]&&"id"!==n})).map((function(e){var t,n=Object(u.a)(e,2),a=n[0],c=n[1];switch(O(a,c)){case"card-image":t=x(a,Ke);break;case"event-image":t=x(a,Re);break;case"song":t=x(a,Je);break;case"string":t=Object(ee.jsx)(Ge.a.Control,{type:"text",value:b[a],onChange:p[a]});break;case"number":t=Object(ee.jsx)(X.a,{placement:"left",overlay:Object(ee.jsx)(Q.a,{children:b[a]}),children:Object(ee.jsx)(Ge.a.Control,{type:"range",value:b[a],max:10,onChange:p[a]})});break;case"boolean":t=Object(ee.jsx)(Ge.a.Check,{type:"checkbox",checked:b[a],onChange:p[a]});break;case"object":if(!(a.indexOf("Cards")>=0))throw new Error("Unrecognized value ".concat(c," for ").concat(a,"."));var s=r,i=Object.entries(s).map((function(e){var t=Object(u.a)(e,2),n=t[0];return{label:t[1].displayName,value:n}})),o=b[a].map((function(e,t){return{label:s[e].displayName,value:e,sequenceId:t}}));t=Object(ee.jsx)(Be.a,{id:"".concat(l,".").concat(a),isMulti:!0,hideSelectedOptions:!1,value:o,onChange:p[a],options:i,displayValue:"name"});break;default:throw new Error("Unrecognized value type ".concat(c," for ").concat(a,"."))}return Object(ee.jsxs)(Ge.a.Group,{as:V.a,controlId:"".concat(l,".").concat(a),children:[Object(ee.jsx)(Ge.a.Label,{column:!0,sm:4,children:$e(a)}),Object(ee.jsx)(W.a,{sm:8,children:t})]},"edit-".concat(a))}));return Object(ee.jsx)(ee.Fragment,{children:v})}function Qe(e){var t=Object(a.useContext)(qe),n=t.actions,c=t.setActions,r=Object(a.useState)(Object.keys(n)[0]),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(ee.jsx)(ze.a.Item,{children:Object(ee.jsx)(ze.a.Link,{eventKey:n,children:a.displayName})},n)}));return Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(W.a,{id:"action-nav",sm:2,children:Object(ee.jsxs)(ze.a,{variant:"pills",className:"flex-column",defaultActiveKey:i,onSelect:o,children:[l,Object(ee.jsx)(R.a,{onClick:function(){var e="Card"+(Object.keys(n).length+1),t=Object(d.a)(Object(d.a)({},n),{},Object(ve.a)({},e,Object(d.a)(Object(d.a)({},m),{},{id:e,displayName:e,displayNameInShop:e})));c(t)},variant:"light",children:"+"})]})}),Object(ee.jsxs)(W.a,{sm:8,children:[Object(ee.jsxs)(Ee,{children:[Object(ee.jsxs)("div",{children:[Object(ee.jsx)("span",{className:"card-label",children:"In Opportunities:"}),Object(ee.jsx)(Te,Object(d.a)({areaType:h,cardId:i,onClick:function(){}},n[i]))]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("span",{className:"card-label",children:"In Hand:"}),Object(ee.jsx)(Te,Object(d.a)({areaType:p,cardId:i,onClick:function(){}},n[i]))]})]}),Object(ee.jsx)(Ze,{actionId:i})]})]})}function Xe(e){var t=e.eventId,n=Object(a.useContext)(qe),c=n.actions,r=n.events,s=n.setSongUrl,i=r[t],o=Object(a.useState)(!1),d=Object(u.a)(o,2),l=d[0],j=d[1];Object(a.useEffect)((function(){s(l?"".concat(i.song):null)}),[i,s,l]);return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(R.a,{onClick:function(){return j(!0)},children:"Show Preview"}),Object(ee.jsx)(Ae,{actions:c,event:i,show:l,onHide:function(){return j(!1)}})]})}function et(e){var t=Object(a.useContext)(qe),n=t.events,c=t.setEvents,r=Object(a.useState)(Object.keys(n)[0]),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(ee.jsx)(ze.a.Item,{children:Object(ee.jsx)(ze.a.Link,{eventKey:n,children:a.displayName})},n)}));return Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(W.a,{id:"action-nav",sm:2,children:Object(ee.jsxs)(ze.a,{variant:"pills",className:"flex-column",onSelect:o,defaultActiveKey:i,children:[l,Object(ee.jsx)(R.a,{onClick:function(){var e="Event"+(Object.keys(n).length+1),t=Object(d.a)(Object(d.a)({},n),{},Object(ve.a)({},e,Object(d.a)(Object(d.a)({},w),{},{id:e,displayName:e})));c(t)},variant:"light",children:"+"})]})}),Object(ee.jsxs)(W.a,{sm:8,children:[Object(ee.jsx)(Xe,{eventId:i}),Object(ee.jsx)(Ze,{eventId:i})]})]})}function tt(e){var t=Object(a.useContext)(qe),n=t.schedule,c=t.setSchedule,r=t.events,s=function(e,t){c(Object(d.a)(Object(d.a)({},n),{},Object(ve.a)({},e,t.map((function(e){return e.id})))))},i=Object.entries(r).map((function(e){var t=Object(u.a)(e,2);return{id:t[0],name:t[1].displayName}})),o=Object(ye.a)(Array(8).keys()).map((function(e){var t=Object(ye.a)(Array(6).keys()).map((function(t){var a=6*e+t,c=(n[a]||[]).map((function(e){return{id:e,name:r[e].displayName}}));return Object(ee.jsxs)(Ce.a.Item,{sm:4,children:[Object(ee.jsxs)("p",{children:["Turn ",a+1,":"]}),Object(ee.jsx)(He.Multiselect,{id:"".concat(a,".events"),selectedValues:c,onSelect:function(e){return s(a,e)},onRemove:function(e){return s(a,e)},options:i,displayValue:"name"})]},"".concat(e,".").concat(t))}));return Object(ee.jsx)(Ce.a,{horizontal:"lg",children:t},e)}));return Object(ee.jsx)("div",{id:"schedule-editor",children:o})}function nt(e){var t=e.dispatch,n=Object(a.useState)(!1),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)("<UNKNOWN>"),o=Object(u.a)(i,2),d=o[0],l=o[1],j=Object(a.useState)(null),b=Object(u.a)(j,2),h=b[0],p=b[1],O=Object(a.useState)(""),f=Object(u.a)(O,2),g=f[0],m=f[1],x=Object(a.useState)("Please paste your data."),v=Object(u.a)(x,2),y=v[0],_=v[1];return Object(a.useEffect)((function(){!function(e){try{var t=JSON.parse(e);if(!t.name)throw new Error("Could not parse save file name.");if(!t.actions)throw new Error("Could not parse actions.");if(!t.events)throw new Error("Could not parse events.");if(!t.schedule)throw new Error("Could not parse schedule.");l(t.name),p(t),_(null)}catch(n){l("<UNKNOWN>"),p(null),_(n.toString())}}(g)}),[g]),Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(R.a,{onClick:function(){return s(!0)},children:"Import"}),Object(ee.jsx)(U.a,{size:"lg",show:r,onHide:function(){return s(!1)},backdrop:"static",keyboard:!1,children:Object(ee.jsxs)(Ge.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),h&&(t({type:"new-save",saveFile:h}),s(!1))},children:[Object(ee.jsx)(U.a.Header,{closeButton:!0,children:Object(ee.jsx)(U.a.Title,{children:"Modal title"})}),Object(ee.jsxs)(U.a.Body,{children:[Object(ee.jsxs)(Ge.a.Group,{controlId:"import-name",children:[Object(ee.jsx)(Ge.a.Label,{children:"Name:"}),Object(ee.jsx)(Ge.a.Control,{type:"text",value:d,required:!0,disabled:!0})]}),Object(ee.jsxs)(Ge.a.Group,{controlId:"import-data",children:[Object(ee.jsx)(Ge.a.Label,{children:"Data:"}),Object(ee.jsx)(Ge.a.Control,{as:"textarea",rows:16,value:g,onChange:function(e){m(e.target.value)},placeholder:"Paste your data here.",isValid:null===y,isInvalid:null!==y}),Object(ee.jsx)(Ge.a.Control.Feedback,{type:y?"invalid":"valid",children:y})]})]}),Object(ee.jsxs)(U.a.Footer,{children:[Object(ee.jsx)(R.a,{variant:"secondary",onClick:function(){return s(!1)},children:"Cancel"}),Object(ee.jsx)(R.a,{variant:"primary",type:"submit",disabled:null===h,children:"Import Save"})]})]})})]})}function at(e){var t=e.saveId,n=e.isDirty,c=Object(o.g)(),r=Object(a.useReducer)((function(e,t){switch(t.type){case"load-all":return t.saveFiles;case"new-save":var n=Object.keys(e).length;return Object(d.a)(Object(d.a)({},e),{},Object(ve.a)({},n,Object(d.a)(Object(d.a)({},t.saveFile),{},{timestamp:Date.now()})));default:throw new Error("Unrecognized action type: ".concat(t.type))}}),{}),s=Object(u.a)(r,2),l=s[0],j=s[1];Object(a.useEffect)((function(){var e=localStorage.getItem("saveFiles"),t=JSON.parse(e);t&&j({type:"load-all",saveFiles:t})}),[t]),Object(a.useEffect)((function(){var e=localStorage.getItem("saveFiles"),n=e?JSON.parse(e):{};if(!(Object.keys(l).length<=Object.keys(n).length)){localStorage.setItem("saveFiles",JSON.stringify(l));var a=Object.keys(l).length-1;a>=0&&a.toString()!==t&&c.push("/".concat(a,"/edit"))}}),[c,l]);var b=Object(a.useContext)(qe),h=b.actions,p=b.events,O=b.schedule,f=Object(a.useState)("Some Name"),g=Object(u.a)(f,2),m=g[0],x=g[1],v=Object(ee.jsxs)("tr",{id:"unsaved-row",children:[Object(ee.jsx)("td",{children:Object.keys(l).length}),Object(ee.jsx)("td",{children:Object(ee.jsx)(Ge.a.Control,{type:"text",value:m,onChange:function(e){return x(e.target.value)}})}),Object(ee.jsx)("td",{children:"Now"}),Object(ee.jsxs)("td",{children:[Object(ee.jsx)(R.a,{onClick:function(){j({type:"new-save",saveFile:{name:m,actions:h,events:p,schedule:O}})},disabled:!n,children:"Save Current"}),"\xa0",Object(ee.jsx)(nt,{dispatch:j})]}),Object(ee.jsx)("td",{children:Object(ee.jsx)(R.a,{disabled:!0,children:"Save to export"})}),Object(ee.jsx)("td",{children:"Save to launch"})]},"unsaved-row"),y=function(e,t,n){return Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("td",{children:e}),Object(ee.jsx)("td",{children:t}),Object(ee.jsx)("td",{children:n?new Date(n).toLocaleString():"N/A"}),Object(ee.jsx)("td",{children:Object(ee.jsx)(i.b,{to:"/".concat(e,"/edit"),children:Object(ee.jsx)(R.a,{children:"Load"})})}),Object(ee.jsx)("td",{children:Object(ee.jsx)(R.a,{onClick:function(){return function(e){navigator.clipboard.writeText(JSON.stringify(l[e]))}(e)},children:"Copy to Clipboard"})}),Object(ee.jsx)("td",{children:Object(ee.jsx)(i.b,{to:"/".concat(e,"/game"),target:"_blank",children:Object(ee.jsx)(R.a,{children:"Launch Game"})})})]},"save-".concat(e))},_=Object.entries(l).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return y(n,a.name,a.timestamp)})).reverse();return Object(ee.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(ee.jsx)("thead",{children:Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{children:"#"}),Object(ee.jsx)("th",{children:"Name"}),Object(ee.jsx)("th",{children:"Date"}),Object(ee.jsx)("th",{children:"Save/Load"}),Object(ee.jsx)("th",{children:"Export"}),Object(ee.jsx)("th",{children:"Launch"})]})}),Object(ee.jsxs)("tbody",{children:[v,_,y("static","Hard Coded Configuration",null)]})]})}function ct(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var c=Object(u.a)(a[n],2),r=c[0],s=c[1];if(!(r in e))return!0;for(var i=0,o=Object.entries(s);i<o.length;i++){var d=Object(u.a)(o[i],2),l=d[0];if(d[1]!==e[r][l])return!0}}return!1}var rt=function(e){var t=e.saveId,n=Object(a.useContext)(P),c=n.actions,r=(n.setActions,n.events),s=(n.setEvents,n.schedule),i=(n.setSchedule,n.isDebug),o=n.setIsDebug,l=Object(B.a)(n,["actions","setActions","events","setEvents","schedule","setSchedule","isDebug","setIsDebug"]),j=Object(a.useState)(c),b=Object(u.a)(j,2),h=b[0],p=b[1],O=Object(a.useState)(r),f=Object(u.a)(O,2),g=f[0],m=f[1],x=Object(a.useState)(s),v=Object(u.a)(x,2),y=v[0],_=v[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),w=S[0],k=S[1],N=Object(a.useState)(null),E=Object(u.a)(N,2),I=E[0],T=E[1];return Object(a.useEffect)((function(){w||(ct(c,h)||ct(r,g)||ct(s,y)?k(!0):k(!1))}),[h,g,y]),Object(a.useEffect)((function(){i&&o(!1)}),[i,o]),Object(ee.jsxs)(qe.Provider,{value:Object(d.a)({actions:h,setActions:p,events:g,setEvents:m,schedule:y,setSchedule:_,saveId:t,songUrl:I,setSongUrl:T},l),children:[Object(ee.jsxs)(K.a,{id:"editor-root",defaultActiveKey:"actions",children:[Object(ee.jsx)(H.a,{disabled:!0,title:w?"Unsaved Changes":"Save Slot: ".concat(t)}),Object(ee.jsx)(H.a,{eventKey:"actions",title:"Actions",children:Object(ee.jsx)(Y.Provider,{value:{actions:h},children:Object(ee.jsx)(Qe,{})})},"edit-actions"),Object(ee.jsx)(H.a,{eventKey:"events",title:"Events",children:Object(ee.jsx)(Y.Provider,{value:{actions:h},children:Object(ee.jsx)(et,{})})},"edit-events"),Object(ee.jsx)(H.a,{eventKey:"schedule",title:"Schedule",children:Object(ee.jsx)(tt,{})},"edit-schedule"),Object(ee.jsx)(H.a,{eventKey:"test",title:"Test Changes",children:Object(ee.jsx)(at,{saveId:t,isDirty:w})},"test")]}),Object(ee.jsx)(Fe,{songUrl:I})]})},st=n(9),it=n.n(st),ot=n(13),dt=function(e){var t=e.count,n=e.total,a=e.percent,c=e.startGame;return Object(ee.jsxs)("div",{id:"loading",children:[Object(ee.jsx)(Z.a,{now:a}),Object(ee.jsx)("hr",{}),Object(ee.jsx)("p",{children:t<n?"Loaded ".concat(t,"/").concat(n," assets..."):Object(ee.jsx)(R.a,{onClick:c,children:"Begin"})})]})},ut=function(e,t,n,a){n(),a(e)},lt=function(){var e=Object(ot.a)(it.a.mark((function e(t,n){var a;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.keys(t).map((function(e){if("undefined"===e)throw new Error("Could not resolve URL for asset.");return new Promise((function(a,c){var r,s=t[e];switch(s){case"img":(r=new Image).onload=function(){ut(r,0,n,a)};break;case"audio":(r=new Audio).oncanplaythrough=function(){ut(r,0,n,a)};break;default:throw new Error("Unrecognized asset type: ".concat(s))}r.src="".concat(b,"/").concat(e),r.onerror=function(){c("Could not load ".concat(s,": ").concat(r.src))}}))}));case 2:return a=e.sent,e.next=5,Promise.all(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jt=function(e){var t=e.children,n=e.isLoading,c=e.setIsLoading,r=Object(B.a)(e,["children","isLoading","setIsLoading"]),s=r.plugins,i=Object(a.useContext)(P),o=s.actions.api.getActions(),l=s.schedule.api.getEvents(),j=Object(a.useState)(!1),b=Object(u.a)(j,2),h=b[0],p=b[1],O=Ye,f=Object(a.useReducer)((function(e,t){switch(t.type){case"increment":return{count:e.count+1,total:e.total,percent:100*(e.count+1)/e.total};default:throw new Error("Unsupported action type ".concat(t.type))}}),{count:0,total:Object.keys(O).length,percent:0}),g=Object(u.a)(f,2),m=g[0],x=g[1];return Object(a.useEffect)((function(){return lt(Ye,(function(){h||x({type:"increment"})})),function(){p(!0)}}),[x,h,s]),n?Object(ee.jsx)(dt,Object(d.a)({startGame:function(){return c(!1)}},m)):Object(ee.jsx)(P.Provider,{value:Object(d.a)(Object(d.a)({},i),{},{actions:o,events:l}),children:Object(ee.jsx)(Y.Provider,{value:Object(d.a)({},r),children:t})})},bt=function(e){var t=e.match,n=Object(a.useState)(!0),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(C),j=Object(u.a)(i,2),b=j[0],h=j[1],p=Object(a.useState)(k),O=Object(u.a)(p,2),f=O[0],g=O[1],m=Object(a.useState)(M),x=Object(u.a)(m,2),v=x[0],y=x[1],S=Object(a.useState)(!0),w=Object(u.a)(S,2),N=w[0],E=w[1];Object(a.useEffect)((function(){var e=localStorage.getItem("saveFiles"),n=JSON.parse(e);if(n&&t.params.configId){var a=n[t.params.configId];a&&(h(a.actions),g(a.events),y(a.schedule))}}),[t]);var I=Object(d.a)(Object(d.a)({},z),{},{plugins:[T({initialSchedule:v,initialEvents:f}),_({initialActions:b})]}),F=Object(l.a)({game:I,board:function(e){return Object(ee.jsx)(P.Provider,{value:{actions:b,setActions:h,events:f,setEvents:g,schedule:v,setSchedule:y,isDebug:r,setIsDebug:s},children:Object(ee.jsxs)(jt,Object(d.a)(Object(d.a)({isLoading:N,setIsLoading:E},e),{},{children:[Object(ee.jsx)(o.b,{exact:!0,path:"/:configId/game",component:Le}),Object(ee.jsx)(o.b,{exact:!0,path:"/:configId/edit",children:Object(ee.jsx)(rt,{saveId:t.params.configId?t.params.configId:0})})]}))})},numPlayers:1,debug:r});return Object(ee.jsx)(F,Object(d.a)({},e))},ht=function(e){return Object(ee.jsxs)(o.d,{children:[Object(ee.jsx)(o.b,{path:"/:configId/edit",component:bt}),Object(ee.jsx)(o.b,{path:"/:configId/game",component:bt}),Object(ee.jsx)(o.b,{exact:!0,path:"/",children:Object(ee.jsx)(o.a,{to:"/static/game"})}),Object(ee.jsx)(o.b,{exact:!0,path:"/editor",children:Object(ee.jsx)(o.a,{to:"/static/edit"})})]})},pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,232)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(ee.jsx)(i.a,{children:Object(ee.jsx)(ht,{})}),document.getElementById("root")),pt()}]),[[211,1,2]]]);
//# sourceMappingURL=main.e31a450b.chunk.js.map