(this.webpackJsonpapex2021=this.webpackJsonpapex2021||[]).push([[0],{105:function(e,t,n){},135:function(e,t){},141:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(23),c=n.n(s),i=n(76),o=(n(104),n(105),n(98)),d="/apex2021/",u=n(1),l=n(16),j=n(4),h=function(e,t){if(e.hand.length>=8)return!1;if(e.deck.length<=0)for(;e.discard.length>0;)e.deck.push(e.discard.pop());return!(e.deck.length<=0)&&(e.hand.push(e.deck.pop()),!0)},p={displayName:null,image:null,description:"<FLAVOR>",moneyCost:0,energyCost:0,producesGrowthMindset:0,producesMoney:0,producesAttention:0,producesEnergy:0,drawsCards:0,discardsCards:0,gainsCards:[],forgetsOnDiscard:!1,forgetsSelf:!1,forgetsCards:0,perform:function(e,t){if(e.energy<=0)return!1;e.energy--,e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+this.producesGrowthMindset),e.money+=this.producesMoney,e.attention+=this.producesAttention,e.energy+=this.producesEnergy;for(var n=0;n<this.drawsCards;n++)h(e);return this.discardsCards>0&&e.hand.length>0&&(e.cardsLeftToDiscard=this.discardsCards,t.events.setStage("discard")),this.forgetsCards>0&&e.hand.length>0&&(e.cardsLeftToForget=this.forgetsCards,t.events.setStage("forget")),this.gainsCards.forEach((function(t){return e.discard.push(t)})),!0},buy:function(e,t){return!(e.attention<=0||e.money<this.moneyCost||e.energy<this.energyCost)&&(e.attention--,e.money-=this.moneyCost,e.energy-=this.energyCost,e.discard.push(this.id),!0)}},f=[{id:"Card01",displayName:"Card1",description:"Make sure to play this every turn!",producesGrowthMindset:1},{id:"Card02",displayName:"Card2",description:"Getting money lets you buy stuff.",producesMoney:1,producesEnergy:1},{id:"Card03",displayName:"Card3",description:"Sometimes you just want to forget everything.",moneyCost:2,forgetsSelf:!0,forgetsCards:99},{id:"Card04",displayName:"Card4",description:"If you play this, you'll have to pick another card in your hand to discard.",moneyCost:2,drawsCards:3,discardsCards:1},{id:"Card05",displayName:"Card5",description:"Doing too much can make you tired.",moneyCost:2,producesGrowthMindset:1,producesMoney:1,producesEnergy:1,drawsCards:1,gainsCards:["fatigue"]},{id:"Card06",displayName:"Card6",description:"More energy means you can play more actions!",moneyCost:3,producesEnergy:2,drawsCards:1},{id:"Card07",displayName:"Card7",description:"IDK",moneyCost:3},{id:"Card08",displayName:"Card8",description:"IDK",moneyCost:4},{id:"Card09",displayName:"Card9",description:"More money",moneyCost:4,producesMoney:2,producesEnergy:1},{id:"Card10",displayName:"Card10",description:"That's a lot of energy.",moneyCost:4,producesAttention:1,producesEnergy:4},{id:"Card11",displayName:"Card11",description:"Maybe there are better options.",moneyCost:5,producesEnergy:1,drawsCards:2},{id:"Card12",displayName:"Card12",description:"More more money",moneyCost:6,producesMoney:3,producesEnergy:1},{id:"fatigue",displayName:"Fatigue",description:"Better rest up or I'll just get even more tired later.",forgetsSelf:!0},{id:"summerHomework",displayName:"Summer Homework",description:"So tedious...",producesGrowthMindset:1,forgetsSelf:!0,forgetsOnDiscard:!0}].map((function(e){return Object(u.a)(Object(u.a)({},p),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),m=n(17),b={displayName:null,image:null,description:"<FLAVOR>",producesStatuses:{},addsCardsToShop:[],addsCardsToDiscard:[],options:{},apply:function(e,t){for(var n=0,r=Object.entries(this.producesStatuses);n<r.length;n++){var a=Object(l.a)(r[n],2),s=a[0],c=a[1];e.statuses[s]=Math.max(e.statuses[s]||0,c)}var i,o=Object(m.a)(this.addsCardsToShop);try{for(o.s();!(i=o.n()).done;){var d=i.value;e.actionShop.push(d)}}catch(p){o.e(p)}finally{o.f()}var u,j=Object(m.a)(this.addsCardsToDiscard);try{for(j.s();!(u=j.n()).done;){var h=u.value;e.discard.push(h)}}catch(p){j.e(p)}finally{j.f()}}},y=[{id:"SummerStart",image:"".concat(d,"middle_school_graduation.png"),displayName:"Congratulations",description:"After a long year, you've finally graduated from middle school.",producesStatuses:{inspired:2,energized:2},addsCardsToDiscard:["summerHomework","summerHomework","Card01"]},{id:"SchoolStart",displayName:"High School Begins",description:"And just like that High School begins.",image:"".concat(d,"welcome_back.png"),addsCardsToDiscard:["Card02","Card02","Card02","Card02","Card02","Card01","Card01"],addsCardsToShop:["Card02","Card02","Card04","Card05"]}].map((function(e){return Object(u.a)(Object(u.a)({},b),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),g=n(10),O=n(13),x=function(){function e(t){Object(g.a)(this,e),this.eventsByDay=t||{}}return Object(O.a)(e,[{key:"addEvent",value:function(e,t){e in this.eventsByDay||(this.eventsByDay[e]=[]),this.eventsByDay[e].push(t)}},{key:"getEvents",value:function(e){return e in this.eventsByDay?this.eventsByDay[e]:[]}}]),e}(),v={displayName:null,image:null,description:"<FLAVOR>",apply:function(e,t){}},C=[{id:"energized",displayName:"Energized",description:"Gain an extra energy at the start of each turn.",apply:function(e,t){e.energy+=1}},{id:"inspired",displayName:"Inspired",description:"Nullify the usual loss of growth mindset at the start of each turn.",apply:function(e,t){e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+1)}}].map((function(e){return Object(u.a)(Object(u.a)({},v),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),w={actionShop:[].sort(),deck:[],hand:[],discard:[],growthMindsetPoints:1,cardsLeftToDiscard:0,cardsLeftToForget:0,statuses:{},currentEvent:null,backgroundImage:null,schedule:{1:["SummerStart"],3:["SchoolStart"]}},k={money:0,attention:1,energy:1};var N={setup:function(e,t){return Object(u.a)(Object(u.a)({},w),k)},moves:{performAction:function(e,t,n){var r=e.hand[n],a=f[r];if(!a.perform(e,t))return j.t;e.hand.splice(n,1),a.forgetsSelf||e.discard.push(r)},buyAction:function(e,t,n){var r=e.actionShop[n];if(!f[r].buy(e,t))return j.t;e.actionShop.splice(n,1)},endTurn:function(e,t){t.events.endTurn()}},turn:{activePlayers:{all:"showEvent"},onBegin:function(e,t){return function(e,t){var n=new x(e.schedule).getEvents(t.turn);for(n.forEach((function(n){y[n].apply(e,t),e.currentEvent=n})),0===n.length&&t.events.endStage();e.hand.length>0;){var r=e.hand.pop();f[r].forgetsOnDiscard||e.discard.push(r)}for(var a=Math.min(5,e.growthMindsetPoints),s=0;s<a;s++)h(e);Object.assign(e,k),e.growthMindsetPoints--;for(var c=0,i=Object.entries(e.statuses);c<i.length;c++){var o=Object(l.a)(i[c],2),d=o[0],u=o[1];console.log(d,u),u>0?(C[d].apply(e,t),e.statuses[d]--):delete e.statuses[d]}}(e,t)},onEnd:function(e,t){e.growthMindsetPoints<=0&&t.events.endGame("fixed-mindset")},stages:{showEvent:{moves:{chooseOption:function(e,t,n){},dismiss:function(e,t){e.backgroundImage=y[e.currentEvent].image,e.currentEvent=null,t.events.endStage()}}},discard:{moves:{discardAction:function(e,t,n){console.log(e.cardsLeftToDiscard);var r=e.hand[n];e.hand.splice(n,1),e.discard.push(r),0===e.hand.length?e.cardsLeftToDiscard=0:e.cardsLeftToDiscard--,e.cardsLeftToDiscard<=0&&t.events.endStage()}}},forget:{moves:{forgetAction:function(e,t,n){console.log(e.cardsLeftToForget),e.hand.splice(n,1),0===e.hand.length?e.cardsLeftToForget=0:e.cardsLeftToForget--,e.cardsLeftToForget<=0&&t.events.endStage()}}}}}},S=n(7),E=n.n(S),M=n(11),P=n(158),I=n(156),T=n(149),D=n(151),G=n(152),A=n(153),L=a.a.createContext({}),F=n(147),B=n(148),H=n(3),z={0:"danger",1:"danger",2:"danger",3:"warning",4:"success",5:"info"};var K=function(){var e=Object(r.useContext)(L),t=e.G,n=e.ctx,a=(e.moves,t.growthMindsetPoints),s=t.money,c=t.attention,i=t.energy;return Object(H.jsxs)(F.a,{responsive:!0,bordered:!0,id:"player-info",children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{className:"info-label-row",children:[Object(H.jsx)("th",{children:"Day #"}),Object(H.jsx)("th",{children:"Growth Mindset"}),Object(H.jsx)("th",{children:"Money"}),Object(H.jsx)("th",{children:"Attention"}),Object(H.jsx)("th",{children:"Energy"})]})}),Object(H.jsx)("tbody",{children:Object(H.jsxs)("tr",{className:"info-data-row",children:[Object(H.jsx)("td",{children:Object(H.jsx)(B.a,{variant:"dark",children:n.turn})}),Object(H.jsx)("td",{children:Object(H.jsx)(T.a,{now:(100*a/5).toPrecision(3),label:a,variant:z[a],animated:5===a})}),Object(H.jsx)("td",{children:Object(H.jsx)(B.a,{variant:"warning",children:s})}),Object(H.jsx)("td",{children:Object(H.jsx)(B.a,{variant:"primary",children:c})}),Object(H.jsx)("td",{children:Object(H.jsx)(B.a,{variant:"success",children:i})})]})})]})},R=n(12),V=n(160),_=n(161),J=n(154),Y=n(155),U=n(159),q=n(77),Q=n(150),W=n(157);function X(e){return e+" "+(e>1?"cards":"card")}var Z=function(e){var t=e.description,n=e.runEffect,a=e.className,s=e.passthrough;return Object(r.useEffect)((function(){n&&n()})),Object(H.jsx)(Q.a,Object(u.a)(Object(u.a)({id:"keyword-description",className:a},s),{},{children:t}))},$=function(e){var t=e.value,n=e.description,r=e.tooltipClassName,a=e.runEffect;return Object(H.jsx)(W.a,{placement:"right",overlay:function(e){return Object(H.jsx)(Z,{description:n,className:r,runEffect:a,passthrough:e})},children:Object(H.jsx)("span",{className:"card-keyword",children:t})})},ee=function(e){var t=e.number;return Object(H.jsx)($,{value:"Discard "+t,description:"Place cards from your hand into your discard pile until you have placed "+X(t)+" or your hand is empty."})},te=function(e){var t=e.number;return Object(H.jsx)($,{value:"Draw "+t,description:"Place "+X(t)+" from your deck into your hand. If your deck is empty, your discard pile will automatically be shuffled into your deck."})},ne=function(e){var t=e.number;return Object(H.jsx)($,{value:"Forget "+t,description:"Permanently remove cards from your hand until you have removed "+X(t)+" or your hand is empty."})},re=function(){return Object(H.jsx)($,{value:"Forget Self",description:"Permanently remove this card from your hand upon being played."})},ae=function(e){var t=e.cardId,n=e.renderCard,r=e.tooltipClassName,a=e.runEffect,s=n({cardId:t,onClick:function(e){}});return Object(H.jsx)($,{value:"Gain "+f[t].displayName,description:s,tooltipClassName:r,runEffect:a})},se=function(e){var t=e.number;return Object(H.jsx)($,{value:"+"+t+" Growth Mindset",description:"Growth Mindset represents the number of cards you can draw at the beginning of the next turn. You lose one point per turn, and Growth Mindset is capped at 5."})},ce=function(e){return Object(H.jsx)($,{value:"#YOLO",description:"If this card remains in your hand at the end of the turn, it will be permanently removed from your deck."})};function ie(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],c=e.cardId,i=e.slotId,o=e.onClick,d=e.ref,u=Object(r.useContext)(L).ctx,j=f[c],h=j.displayName,p=j.image,m=j.description,b=j.moneyCost,y=j.energyCost,g=j.producesGrowthMindset,O=j.producesMoney,x=j.producesAttention,v=j.producesEnergy,C=j.drawsCards,w=j.discardsCards,k=j.gainsCards,N=j.forgetsOnDiscard,S=j.forgetsSelf,E=j.forgetsCards,M=u.activePlayers&&"discard"===u.activePlayers[u.playOrderPos],P=u.activePlayers&&"forget"===u.activePlayers[u.playOrderPos];return Object(r.useEffect)((function(){Object(q.run)("card-image")})),Object(H.jsxs)(V.a,{ref:d,onClick:function(){return o(i)},onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},bg:M||P?"danger":null,border:a?"warning":"secondary",children:[Object(H.jsx)(V.a.Header,{children:Object(H.jsx)(D.a,{fluid:!0,children:Object(H.jsxs)(G.a,{children:[Object(H.jsx)(A.a,{xs:4,className:"cost-label",children:"Makes:"}),Object(H.jsx)(A.a,{xs:4}),Object(H.jsx)(A.a,{xs:1,children:Object(H.jsx)(B.a,{variant:"warning",children:O})}),Object(H.jsx)(A.a,{xs:1,children:Object(H.jsx)(B.a,{variant:"primary",children:x})}),Object(H.jsx)(A.a,{xs:1,children:Object(H.jsx)(B.a,{variant:"success",children:v})})]})})}),Object(H.jsxs)(V.a.Body,{children:[Object(H.jsx)(V.a.Title,{children:h}),Object(H.jsx)(V.a.Img,{src:null!=p?p:"holder.js/256x128",className:"card-image"}),Object(H.jsxs)(_.a,{className:"extra-rules",children:[g>0&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(se,{number:g})},"growth-mindset"),C>0&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(te,{number:C})},"draws-cards"),w>0&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(ee,{number:w})},"discards-cards"),N&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(ce,{})},"forgets-on-discard"),S&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(re,{})},"forgets-self"),E>0&&Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(ne,{number:E})},"forgets-cards"),k.map((function(e){return Object(H.jsx)(_.a.Item,{children:Object(H.jsx)(ae,{cardId:e,renderCard:ie,tooltipClassName:"card-preview",runEffect:function(){return Object(q.run)("card-image")}})},"gains-"+e)}))]}),Object(H.jsx)(V.a.Text,{className:"flavor",children:m})]}),Object(H.jsx)(V.a.Footer,{children:Object(H.jsx)(D.a,{fluid:!0,children:Object(H.jsxs)(G.a,{children:[Object(H.jsx)(A.a,{xs:4,className:"cost-label",children:"Costs:"}),Object(H.jsx)(A.a,{xs:4}),Object(H.jsx)(A.a,{xs:1,children:Object(H.jsx)(B.a,{variant:"warning",children:b})}),Object(H.jsx)(A.a,{xs:1}),Object(H.jsx)(A.a,{xs:1,children:Object(H.jsx)(B.a,{variant:"success",children:y})})]})})})]})}function oe(e){var t=e.actions,n=e.className,r=e.onClick,a=t.map((function(e,t){return Object(H.jsx)(ie,{cardId:e,slotId:t,onClick:r},t)}));return Object(H.jsx)(J.a,{className:"action-list-"+n,children:a.length>0?a:Object(H.jsx)(B.a,{children:Object(H.jsx)("h1",{children:"No Actions Available"})})})}var de=function(){var e=Object(r.useContext)(L),t=e.G,n=e.ctx,a=e.moves,s=t.hand,c=t.actionShop,i=t.deck,o=t.discard,d=function(e){},u=n.activePlayers&&"discard"===n.activePlayers[n.playOrderPos],j=n.activePlayers&&"forget"===n.activePlayers[n.playOrderPos],h={Hand:{actions:s,onClick:u?a.discardAction:j?a.forgetAction:a.performAction},Shop:{actions:c,onClick:u?d:a.buyAction},Deck:{actions:Object(R.a)(i).sort(),onClick:d},"Discard Pile":{actions:o,onClick:d}},p=Object(r.useState)("Hand"),f=Object(l.a)(p,2),m=f[0],b=f[1],y=Object.keys(h).map((function(e){return Object(H.jsx)(Y.a,{eventKey:e,title:e,children:Object(H.jsx)(oe,{actions:h[e].actions,onClick:h[e].onClick,className:e})},e)}));return Object(H.jsxs)(U.a,{id:"actions",activeKey:m,onSelect:function(e){return b(e)},children:[y,Object(H.jsx)(Y.a,{eventKey:"next-turn",title:"Next Turn",children:Object(H.jsx)(I.a,{onClick:function(){a.endTurn(),b("Hand")},className:"confirm-next-turn",children:"Confirm End Turn"})},"next-turn")]})};function ue(e){var t=Object(r.useContext)(L),n=t.G,a=t.moves;console.log(a);var s=n.currentEvent in y;if(!s)return Object(H.jsx)(H.Fragment,{});var c=function(){return a.dismiss()},i=y[n.currentEvent],o=i.displayName,d=i.description,u=i.image,l={backgroundImage:null==u?null:"url(".concat(u,")"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};return Object(H.jsxs)(P.a,{size:"lg",show:s,onHide:c,style:l,className:"event-modal",centered:!0,children:[Object(H.jsx)(P.a.Header,{children:Object(H.jsx)(P.a.Title,{children:o})}),Object(H.jsx)(P.a.Body,{children:d}),Object(H.jsx)(P.a.Footer,{children:Object(H.jsx)(I.a,{onClick:c,children:"Continue"})})]})}var le=function(e){var t=e.count,n=e.total,r=e.percent,a=e.startGame;return Object(H.jsxs)("div",{id:"loading",children:[Object(H.jsx)(T.a,{now:r}),Object(H.jsx)("hr",{}),Object(H.jsx)("p",{children:t<n?"Loaded ".concat(t,"/").concat(n," assets..."):Object(H.jsx)(I.a,{onClick:a,children:"New Game"})})]})},je=function(e){var t=Object(r.useState)(!0),n=Object(l.a)(t,2),a=n[0],s=n[1],c=function(){for(var e={},t=0,n=Object.values(f);t<n.length;t++){var r=n[t];null!==r.image&&(e[r.image]="img")}for(var a=0,s=Object.values(y);a<s.length;a++){var c=s[a];null!==c.image&&(e[c.image]="img")}return e}(),i=Object(r.useReducer)((function(e,t){switch(t.type){case"increment":return{count:e.count+1,total:e.total,percent:100*(e.count+1)/e.total};default:throw new Error("Unsupported action type ".concat(t.type))}}),{count:0,total:Object.keys(c).length,percent:0}),o=Object(l.a)(i,2),d=o[0],j=o[1],h=function(){var e=Object(M.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.keys(t).map((function(e){return new Promise((function(n,r){if("img"===t[e]){var a=new Image;a.src=e,a.onload=function(){j({type:"increment"}),n()},a.onerror=r()}}))}));case 2:return n=e.sent,e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){h(c)}),[c]);var p=e.G,m=e.ctx,b=e.moves,g=p.backgroundImage,O={backgroundImage:null==g?null:"url(".concat(g,")"),backgroundSize:"cover"};return a?Object(H.jsx)(le,Object(u.a)({startGame:function(){return s(!1)}},d)):Object(H.jsxs)(L.Provider,{value:{G:p,ctx:m,moves:b},children:[Object(H.jsx)("div",{style:O,id:"bg-container"}),Object(H.jsxs)("div",{id:"game-wrapper",children:[Object(H.jsxs)(D.a,{fluid:!0,id:"game-container",children:[Object(H.jsx)(G.a,{children:Object(H.jsx)(A.a,{children:Object(H.jsx)(K,{})})}),Object(H.jsx)(G.a,{children:Object(H.jsx)(A.a,{children:Object(H.jsx)(de,{})})})]}),Object(H.jsx)(ue,{})]})]})},he=n(15),pe=Object(o.a)({game:N,board:je,numPlayers:1}),fe=function(e){return Object(H.jsx)(he.c,{children:Object(H.jsx)(he.a,{exact:!0,strict:!0,path:"/apex2021",component:pe})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(H.jsx)(i.a,{children:Object(H.jsx)(fe,{})}),document.getElementById("root")),me()}},[[141,1,2]]]);
//# sourceMappingURL=main.64e47bda.chunk.js.map