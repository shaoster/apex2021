(this.webpackJsonpapex2021=this.webpackJsonpapex2021||[]).push([[0],{112:function(e,t,n){},146:function(e,t){},150:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),s=n.n(c),i=n(44),o=(n(111),n(112),8),d="/apex2021",l=n(1),u=n(13),j=n(16),b=n(104),h=function(e,t){if(e.hand.length>=o)return!1;if(e.deck.length<=0)for(;e.discard.length>0;)e.deck.push(e.discard.pop());return!(e.deck.length<=0)&&(e.hand.push(e.deck.pop()),!0)},O={displayName:null,image:null,description:"<FLAVOR>",moneyCost:0,energyCost:0,producesGrowthMindset:0,producesMoney:0,producesAttention:0,producesEnergy:0,drawsCards:0,discardsCards:0,gainsCards:[],forgetsOnDiscard:!1,forgetsSelf:!1,forgetsCards:0,perform:function(e,t){if(e.energy<=0)return!1;e.energy--,e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+this.producesGrowthMindset),e.money+=this.producesMoney,e.attention+=this.producesAttention,e.energy+=this.producesEnergy;for(var n=0;n<this.drawsCards;n++)h(e);return this.discardsCards>0&&e.hand.length>0&&(e.cardsLeftToDiscard=this.discardsCards,t.events.setStage("discard")),this.forgetsCards>0&&e.hand.length>0&&(e.cardsLeftToForget=this.forgetsCards,t.events.setStage("forget")),this.gainsCards.forEach((function(t){return e.discard.push(t)})),!0},buy:function(e,t){return!(e.attention<=0||e.money<this.moneyCost||e.energy<this.energyCost)&&(e.attention--,e.money-=this.moneyCost,e.energy-=this.energyCost,e.discard.push(this.id),!0)}},f=[{id:"Card01",displayName:"Card1",description:"Make sure to play this every turn!",producesGrowthMindset:1},{id:"Card02",displayName:"Card2",description:"Getting money lets you buy stuff.",producesMoney:1,producesEnergy:1},{id:"Card03",displayName:"Card3",description:"Sometimes you just want to forget everything.",moneyCost:2,forgetsSelf:!0,forgetsCards:o},{id:"Card04",displayName:"Card4",description:"If you play this, you'll have to pick another card in your hand to discard.",moneyCost:2,drawsCards:3,discardsCards:1},{id:"Card05",displayName:"Card5",description:"Doing too much can make you tired.",moneyCost:2,producesGrowthMindset:1,producesMoney:1,producesEnergy:1,drawsCards:1,gainsCards:["fatigue"]},{id:"Card06",displayName:"Card6",description:"More energy means you can play more actions!",moneyCost:3,producesEnergy:2,drawsCards:1},{id:"Card07",displayName:"Card7",description:"IDK",moneyCost:3},{id:"Card08",displayName:"Card8",description:"IDK",moneyCost:4},{id:"Card09",displayName:"Card9",description:"More money",moneyCost:4,producesMoney:2,producesEnergy:1},{id:"Card10",displayName:"Card10",description:"That's a lot of energy.",moneyCost:4,producesAttention:1,producesEnergy:4},{id:"Card11",displayName:"Card11",description:"Maybe there are better options.",moneyCost:5,producesEnergy:1,drawsCards:2},{id:"Card12",displayName:"Card12",description:"More more money",moneyCost:6,producesMoney:3,producesEnergy:1},{id:"fatigue",displayName:"Fatigue",description:"Better rest up or I'll just get even more tired later.",forgetsSelf:!0},{id:"summerHomework",displayName:"Summer Homework",description:"So tedious...",producesGrowthMindset:1,forgetsSelf:!0,forgetsOnDiscard:!0}].map((function(e){return Object(l.a)(Object(l.a)({},O),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),p=n(18),m={displayName:null,image:null,description:"<FLAVOR>",inspiredTurns:0,energizedTurns:0,addsCardsToShop:[],addsCardsToDiscardPile:[],apply:function(e,t){this.inspiredTurns>0&&(e.statuses.inspired=Math.max(e.statuses.inspired||0,this.inspiredTurns)),this.energizedTurns>0&&(e.statuses.energized=Math.max(e.statuses.energized||0,this.energizedTurns));var n,a=Object(p.a)(this.addsCardsToShop);try{for(a.s();!(n=a.n()).done;){var r=n.value;e.actionShop.push(r)}}catch(o){a.e(o)}finally{a.f()}var c,s=Object(p.a)(this.addsCardsToDiscardPile);try{for(s.s();!(c=s.n()).done;){var i=c.value;e.discard.push(i)}}catch(o){s.e(o)}finally{s.f()}}},x=[{id:"SummerStart",image:"middle_school_graduation.png",displayName:"Congratulations",description:"After a long year, you've finally graduated from middle school.",inspiredTurns:2,energizedTurns:2,addsCardsToDiscardPile:["summerHomework","summerHomework","Card01"]},{id:"SchoolStart",displayName:"High School Begins",description:"And just like that High School begins.",image:"welcome_back.png",addsCardsToDiscardPile:["Card02","Card02","Card02","Card02","Card02","Card01","Card01"],addsCardsToShop:["Card02","Card02","Card04","Card05"]}].map((function(e){return Object(l.a)(Object(l.a)({},m),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),g=n(11),v=n(14),y=function(){function e(t){Object(g.a)(this,e),this.eventsByDay=t||{}}return Object(v.a)(e,[{key:"addEvent",value:function(e,t){e in this.eventsByDay||(this.eventsByDay[e]=[]),this.eventsByDay[e].push(t)}},{key:"getEvents",value:function(e){return e in this.eventsByDay?this.eventsByDay[e]:[]}}]),e}(),C=function(e){var t=e.initialSchedule;return{name:"schedule",setup:function(){return{schedule:t}},api:function(e){var t=e.ctx,n=e.data;return{getCurrentEvents:function(){return new y(n.schedule).getEvents(t.turn)},addEvent:function(e,t){new y(n.schedule).addEvent(e,t)},getRaw:function(){return n}}}}},k={0:["SummerStart"],2:["SchoolStart"]},w=n(5),S={displayName:null,image:null,description:"<FLAVOR>",apply:function(e,t){}},N=[{id:"energized",displayName:"Energized",description:"Gain an extra energy at the start of each turn.",apply:function(e,t){e.energy+=1}},{id:"inspired",displayName:"Inspired",description:"Nullify the usual loss of growth mindset at the start of each turn.",apply:function(e,t){e.growthMindsetPoints=Math.min(5,e.growthMindsetPoints+1)}}].map((function(e){return Object(l.a)(Object(l.a)({},S),e)})).reduce((function(e,t){return e[t.id]=t,e}),{}),E={actionShop:[].sort(),deck:[],hand:[],discard:[],growthMindsetPoints:1,cardsLeftToDiscard:0,cardsLeftToForget:0,statuses:{},currentEvent:null,backgroundImage:null},I={money:0,attention:1,energy:1};var M={setup:function(e,t){return Object(l.a)(Object(l.a)({},E),I)},moves:{performAction:function(e,t,n){var a=e.hand[n],r=f[a];if(!r.perform(e,t))return w.t;e.hand.splice(n,1),r.forgetsSelf||e.discard.push(a)},buyAction:function(e,t,n){var a=e.actionShop[n];if(!f[a].buy(e,t))return w.t;e.actionShop.splice(n,1)},endTurn:function(e,t){t.events.endTurn()}},turn:{activePlayers:{all:"showEvent"},onBegin:function(e,t){return function(e,t){console.log(t);var n=t.schedule.getCurrentEvents();for(console.log(n),n.forEach((function(n){x[n].apply(e,t),e.currentEvent=n})),0===n.length&&t.events.endStage();e.hand.length>0;){var a=e.hand.pop();f[a].forgetsOnDiscard||e.discard.push(a)}for(var r=Math.min(5,e.growthMindsetPoints),c=0;c<r;c++)h(e);Object.assign(e,I),e.growthMindsetPoints--;for(var s=0,i=Object.entries(e.statuses);s<i.length;s++){var o=Object(u.a)(i[s],2),d=o[0],l=o[1];console.log(d,l),l>0?(N[d].apply(e,t),e.statuses[d]--):delete e.statuses[d]}}(e,t)},onEnd:function(e,t){e.growthMindsetPoints<=0&&t.events.endGame("fixed-mindset")},stages:{showEvent:{moves:{chooseOption:function(e,t,n){},dismiss:function(e,t){e.backgroundImage=x[e.currentEvent].image,e.currentEvent=null,t.events.endStage()}}},discard:{moves:{discardAction:function(e,t,n){console.log(e.cardsLeftToDiscard);var a=e.hand[n];e.hand.splice(n,1),e.discard.push(a),0===e.hand.length?e.cardsLeftToDiscard=0:e.cardsLeftToDiscard--,e.cardsLeftToDiscard<=0&&t.events.endStage()}}},forget:{moves:{forgetAction:function(e,t,n){console.log(e.cardsLeftToForget),e.hand.splice(n,1),0===e.hand.length?e.cardsLeftToForget=0:e.cardsLeftToForget--,e.cardsLeftToForget<=0&&t.events.endStage()}}}}}},T=n(8),P=n.n(T),A=n(12),D=n(167),L=n(165),G=n(158),F=n(160),K=n(161),z=n(101),B=r.a.createContext({}),H=n(156),V=n(157),R=n(2),J={0:"danger",1:"danger",2:"danger",3:"warning",4:"success",5:"info"};var $=function(){var e=Object(a.useContext)(B),t=e.G,n=e.ctx,r=t.growthMindsetPoints,c=t.money,s=t.attention,i=t.energy;return Object(R.jsxs)(H.a,{responsive:!0,bordered:!0,id:"player-info",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{className:"info-label-row",children:[Object(R.jsx)("th",{children:"Day #"}),Object(R.jsx)("th",{children:"Growth Mindset"}),Object(R.jsx)("th",{children:"Money"}),Object(R.jsx)("th",{children:"Attention"}),Object(R.jsx)("th",{children:"Energy"})]})}),Object(R.jsx)("tbody",{children:Object(R.jsxs)("tr",{className:"info-data-row",children:[Object(R.jsx)("td",{children:Object(R.jsx)(V.a,{variant:"dark",children:n.turn})}),Object(R.jsx)("td",{children:Object(R.jsx)(G.a,{now:(100*r/5).toPrecision(3),label:r,variant:J[r],animated:5===r})}),Object(R.jsx)("td",{children:Object(R.jsx)(V.a,{variant:"warning",children:c})}),Object(R.jsx)("td",{children:Object(R.jsx)(V.a,{variant:"primary",children:s})}),Object(R.jsx)("td",{children:Object(R.jsx)(V.a,{variant:"success",children:i})})]})})]})},U=n(10),_=n(169),Z=n(170),Y=n(162),q=n(163),Q=n(164),W=n(80),X=n(159),ee=n(166);function te(e){return e+" "+(e>1?"cards":"card")}var ne=function(e){var t=e.description,n=e.runEffect,r=e.className,c=e.passthrough;return Object(a.useEffect)((function(){n&&n()})),Object(R.jsx)(X.a,Object(l.a)(Object(l.a)({id:"keyword-description",className:r},c),{},{children:t}))},ae=function(e){var t=e.value,n=e.description,a=e.tooltipClassName,r=e.runEffect;return Object(R.jsx)(ee.a,{placement:"right",overlay:function(e){return Object(R.jsx)(ne,{description:n,className:a,runEffect:r,passthrough:e})},children:Object(R.jsx)("span",{className:"card-keyword",children:t})})},re=function(e){var t=e.number;return Object(R.jsx)(ae,{value:"Discard "+t,description:"Place cards from your hand into your discard pile until you have placed "+te(t)+" or your hand is empty."})},ce=function(e){var t=e.number;return Object(R.jsx)(ae,{value:"Draw "+t,description:"Place "+te(t)+" from your deck into your hand. If your deck is empty, your discard pile will automatically be shuffled into your deck."})},se=function(e){var t=e.number;return Object(R.jsx)(ae,{value:"Forget "+t,description:"Permanently remove cards from your hand until you have removed "+te(t)+" or your hand is empty."})},ie=function(){return Object(R.jsx)(ae,{value:"Forget Self",description:"Permanently remove this card from your hand upon being played."})},oe=function(e){var t=e.cardId,n=e.renderCard,r=e.tooltipClassName,c=e.runEffect,s=Object(a.useContext)(B).actions,i=n(Object(l.a)({cardId:t,onClick:function(e){}},s[t]));return Object(R.jsx)(ae,{value:"Gain "+s[t].displayName,description:i,tooltipClassName:r,runEffect:c})},de=function(e){var t=e.number;return Object(R.jsx)(ae,{value:"+"+t+" Growth Mindset",description:"Growth Mindset represents the number of cards you can draw at the beginning of the next turn. You lose one point per turn, and Growth Mindset is capped at 5."})},le=function(e){return Object(R.jsx)(ae,{value:"#YOLO",description:"If this card remains in your hand at the end of the turn, it will be permanently removed from your deck."})};function ue(e){var t=e.cardId,n=Object(a.useContext)(B).actions;return console.log(n),Object(R.jsx)(je,Object(l.a)(Object(l.a)({},e),n[t]))}function je(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1],s=e.onClick,i=e.ref,o=e.gameStage,d=e.displayName,l=e.image,j=e.description,b=e.moneyCost,h=e.energyCost,O=e.producesGrowthMindset,f=e.producesMoney,p=e.producesAttention,m=e.producesEnergy,x=e.drawsCards,g=e.discardsCards,v=e.gainsCards,y=e.forgetsOnDiscard,C=e.forgetsSelf,k=e.forgetsCards;return Object(a.useEffect)((function(){Object(W.run)("card-image")})),Object(R.jsxs)(_.a,{ref:i,onClick:s,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},bg:"discard"===o||"forget"===o?"danger":null,border:r?"warning":"secondary",className:"action-card",children:[Object(R.jsx)(_.a.Header,{children:Object(R.jsx)(F.a,{fluid:!0,children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(z.a,{xs:4,className:"cost-label",children:"Makes:"}),Object(R.jsx)(z.a,{xs:4}),Object(R.jsx)(z.a,{xs:1,children:Object(R.jsx)(V.a,{variant:"warning",children:f})}),Object(R.jsx)(z.a,{xs:1,children:Object(R.jsx)(V.a,{variant:"primary",children:p})}),Object(R.jsx)(z.a,{xs:1,children:Object(R.jsx)(V.a,{variant:"success",children:m})})]})})}),Object(R.jsxs)(_.a.Body,{children:[Object(R.jsx)(_.a.Title,{children:d}),Object(R.jsx)(_.a.Img,{src:null!=l?l:"holder.js/256x128",className:"card-image"}),Object(R.jsxs)(Z.a,{className:"extra-rules",children:[O>0&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(de,{number:O})},"growth-mindset"),x>0&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(ce,{number:x})},"draws-cards"),g>0&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(re,{number:g})},"discards-cards"),y&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(le,{})},"forgets-on-discard"),C&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(ie,{})},"forgets-self"),k>0&&Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(se,{number:k})},"forgets-cards"),v.map((function(e){return Object(R.jsx)(Z.a.Item,{children:Object(R.jsx)(oe,{cardId:e,renderCard:je,tooltipClassName:"card-preview",runEffect:function(){return Object(W.run)("card-image")}})},"gains-"+e)}))]}),Object(R.jsx)(_.a.Text,{className:"flavor",children:j})]}),Object(R.jsx)(_.a.Footer,{children:Object(R.jsx)(F.a,{fluid:!0,children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(z.a,{xs:4,className:"cost-label",children:"Costs:"}),Object(R.jsx)(z.a,{xs:4}),Object(R.jsx)(z.a,{xs:1,children:Object(R.jsx)(V.a,{variant:"warning",children:b})}),Object(R.jsx)(z.a,{xs:1}),Object(R.jsx)(z.a,{xs:1,children:Object(R.jsx)(V.a,{variant:"success",children:h})})]})})})]})}function be(e){var t=e.actionsList,n=e.className,a=e.onClick,r=e.gameStage,c=t.map((function(e,t){return Object(R.jsx)(ue,{cardId:e,onClick:function(){return a(t)},gameStage:r},t)}));return Object(R.jsx)(Y.a,{className:"action-list-"+n,children:c.length>0?c:Object(R.jsx)(V.a,{children:Object(R.jsx)("h1",{children:"No Actions Available"})})})}var he=function(){var e=Object(a.useContext)(B),t=e.G,n=e.ctx,r=e.moves,c=t.hand,s=t.actionShop,i=t.deck,o=t.discard,d=function(e){},l=n.activePlayers&&"discard"===n.activePlayers[n.playOrderPos],j=n.activePlayers&&"forget"===n.activePlayers[n.playOrderPos],b=l?"discard":j?"forget":null,h={Hand:{actions:c,onClick:l?r.discardAction:j?r.forgetAction:r.performAction},Shop:{actions:s,onClick:l?d:r.buyAction},Deck:{actions:Object(U.a)(i).sort(),onClick:d},"Discard Pile":{actions:o,onClick:d}},O=Object(a.useState)("Hand"),f=Object(u.a)(O,2),p=f[0],m=f[1],x=Object.keys(h).map((function(e){return Object(R.jsx)(q.a,{eventKey:e,title:e,children:Object(R.jsx)(be,{actionsList:h[e].actions,onClick:h[e].onClick,className:e,gameStage:b})},e)}));return Object(R.jsx)("div",{id:"game-tabs",children:Object(R.jsxs)(Q.a,{id:"actions",activeKey:p,onSelect:function(e){return m(e)},children:[x,Object(R.jsx)(q.a,{eventKey:"next-turn",title:"Next Turn",children:Object(R.jsx)(L.a,{onClick:function(){r.endTurn(),m("Hand")},className:"confirm-next-turn",children:"Confirm End Turn"})},"next-turn")]})})};function Oe(e){var t=Object(a.useContext)(B),n=t.G,r=t.moves,c=t.events,s=n.currentEvent in c;if(!s)return Object(R.jsx)(R.Fragment,{});var i=function(){return r.dismiss()},o=c[n.currentEvent],l=o.displayName,u=o.description,j=o.image,b={backgroundImage:null==j?null:"url(".concat(d,"/").concat(j,")"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};return Object(R.jsxs)(D.a,{size:"lg",show:s,onHide:i,style:b,className:"event-modal",centered:!0,children:[Object(R.jsx)(D.a.Header,{children:Object(R.jsx)(D.a.Title,{children:l})}),Object(R.jsx)(D.a.Body,{children:u}),Object(R.jsx)(D.a.Footer,{children:Object(R.jsx)(L.a,{onClick:i,children:"Continue"})})]})}var fe=function(e,t){for(var n={},a=0,r=Object.values(n);a<r.length;a++){var c=r[a];null!==c.image&&(n[c.image]="img")}for(var s=0,i=Object.values(t);s<i.length;s++){var o=i[s];null!==o.image&&(n[o.image]="img")}return n},pe=function(e){var t=e.count,n=e.total,a=e.percent,r=e.startGame;return Object(R.jsxs)("div",{id:"loading",children:[Object(R.jsx)(G.a,{now:a}),Object(R.jsx)("hr",{}),Object(R.jsx)("p",{children:t<n?"Loaded ".concat(t,"/").concat(n," assets..."):Object(R.jsx)(L.a,{onClick:r,children:"New Game"})})]})},me=function(e){var t=e.G,n=e.ctx,r=e.moves,c=Object(a.useContext)(B),s=c.actions,i=c.events,o=Object(a.useState)(!0),j=Object(u.a)(o,2),b=j[0],h=j[1],O=fe(0,i),f=Object(a.useReducer)((function(e,t){switch(t.type){case"increment":return{count:e.count+1,total:e.total,percent:100*(e.count+1)/e.total};default:throw new Error("Unsupported action type ".concat(t.type))}}),{count:0,total:Object.keys(O).length,percent:0}),p=Object(u.a)(f,2),m=p[0],x=p[1],g=function(){var e=Object(A.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.keys(t).map((function(e){return new Promise((function(n,a){if("img"===t[e]){var r=new Image;r.src="".concat(d,"/").concat(e),r.onload=function(){x({type:"increment"}),console.log("Loaded ".concat(r.src)),n(r)},r.onerror=function(){a("Could not load ".concat(r.src))}}}))}));case 2:return n=e.sent,e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){g(fe(0,i))}),[s,i]);var v=t.backgroundImage,y={backgroundImage:null==v?null:"url(".concat(d,"/").concat(v,")"),backgroundSize:"cover"};return b?Object(R.jsx)(pe,Object(l.a)({startGame:function(){return h(!1)}},m)):Object(R.jsxs)(B.Provider,{value:{G:t,ctx:n,moves:r,actions:s,events:i},children:[Object(R.jsx)("div",{style:y,id:"bg-container"}),Object(R.jsxs)("div",{id:"game-wrapper",children:[Object(R.jsxs)(F.a,{fluid:!0,id:"game-container",children:[Object(R.jsx)(K.a,{children:Object(R.jsx)(z.a,{children:Object(R.jsx)($,{})})}),Object(R.jsx)(K.a,{children:Object(R.jsx)(z.a,{children:Object(R.jsx)(he,{})})})]}),Object(R.jsx)(Oe,{})]})]})},xe=n(20),ge=n(81),ve=n.n(ge),ye=n(168),Ce=n(105),ke=n(82);function we(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(e){return e.toUpperCase()}))}function Se(e){for(var t=e.actionId,n=e.eventId,r=Object(a.useContext)(B),c=r.actions,s=r.updateActions,i=r.events,o=r.updateEvents,d=t||n,j=t?c[t]:i[n],b=t?c:i,h={},O=function(){var e=p[f];h[e]=function(n){var a;switch(typeof b[d][e]){case"string":a=n.target.value;break;case"number":a=parseInt(n.target.value);break;case"boolean":a=n.target.checked;break;case"object":a=n.map((function(e){return e.id}));break;default:throw new Error("Don't know how to serialize ".concat(e," for value ").concat(n.target.value))}var r=Object(l.a)(Object(l.a)({},b),Object(xe.a)({},d,Object(l.a)(Object(l.a)({},b[d]),{},Object(xe.a)({},e,a))));(t?s:o)(r)}},f=0,p=Object.keys(j);f<p.length;f++)O();var m=Object.entries(j).filter((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return null!==a&&"function"!==typeof a&&"image"!==n&&"id"!==n})).map((function(e){var t,n=Object(u.a)(e,2),a=n[0],r=n[1];switch(typeof r){case"string":t=Object(R.jsx)(ye.a.Control,{type:"text",defaultValue:j[a],onChange:ve.a.debounce(h[a],300)});break;case"number":t=Object(R.jsx)(ee.a,{placement:"left",overlay:Object(R.jsx)(X.a,{children:j[a]}),children:Object(R.jsx)(ye.a.Control,{type:"range",defaultValue:j[a],max:10,onChange:ve.a.debounce(h[a],300)})});break;case"boolean":t=Object(R.jsx)(ye.a.Check,{type:"checkbox",defaultValue:j[a],onChange:h[a]});break;case"object":if(!(a.indexOf("Cards")>=0))throw new Error("Unrecognized value ".concat(r," for ").concat(a,"."));var s=c,i=Object.entries(s).map((function(e){var t=Object(u.a)(e,2),n=t[0];return{name:t[1].displayName,id:n}})),o=j[a].map((function(e){return{name:s[e].displayName,id:e}}));t=Object(R.jsx)(ke.Multiselect,{id:"".concat(d,".").concat(a),selectedValues:o,onSelect:h[a],onRemove:h[a],options:i,displayValue:"name"});break;default:throw new Error("Unrecognized value type ".concat(r," for ").concat(a,"."))}return Object(R.jsxs)(ye.a.Group,{as:K.a,controlId:"".concat(d,".").concat(a),children:[Object(R.jsx)(ye.a.Label,{column:!0,sm:4,children:we(a)}),Object(R.jsx)(z.a,{sm:8,children:t})]},"edit-".concat(a))}));return Object(R.jsx)(R.Fragment,{children:m})}function Ne(e){var t=Object(a.useContext)(B),n=t.actions,r=t.updateActions,c=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(R.jsx)(Ce.a.Item,{children:Object(R.jsx)(Ce.a.Link,{eventKey:n,children:a.id})},n)})),s=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(R.jsxs)(q.a.Pane,{eventKey:n,children:[Object(R.jsx)("div",{id:"card-editor-card-container",children:Object(R.jsx)(je,Object(l.a)({cardId:n,onClick:function(){}},a))}),Object(R.jsx)(Se,{actionId:n})]},n)}));return Object(R.jsx)(q.a.Container,{defaultActiveKey:Object.keys(n)[0],children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(z.a,{id:"action-nav",sm:2,children:Object(R.jsxs)(Ce.a,{variant:"pills",className:"flex-column",children:[c,Object(R.jsx)(L.a,{onClick:function(){var e="Card"+(Object.keys(n).length+1),t=Object(l.a)(Object(l.a)({},n),{},Object(xe.a)({},e,Object(l.a)(Object(l.a)({},O),{},{id:e,displayName:e})));r(t)},variant:"light",children:"+"})]})}),Object(R.jsx)(z.a,{sm:8,children:Object(R.jsx)(q.a.Content,{children:s})})]})})}function Ee(e){var t=Object(a.useContext)(B),n=t.events,r=t.updateEvents,c=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(R.jsx)(Ce.a.Item,{children:Object(R.jsx)(Ce.a.Link,{eventKey:n,children:a.id})},n)})),s=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0];t[1];return Object(R.jsx)(q.a.Pane,{eventKey:n,children:Object(R.jsx)(Se,{eventId:n})},n)}));return Object(R.jsx)(q.a.Container,{defaultActiveKey:Object.keys(n)[0],children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(z.a,{id:"action-nav",sm:2,children:Object(R.jsxs)(Ce.a,{variant:"pills",className:"flex-column",children:[c,Object(R.jsx)(L.a,{onClick:function(){var e="Event"+(Object.keys(n).length+1),t=Object(l.a)(Object(l.a)({},n),{},Object(xe.a)({},e,Object(l.a)(Object(l.a)({},m),{},{id:e,displayName:e})));r(t)},variant:"light",children:"+"})]})}),Object(R.jsx)(z.a,{sm:8,children:Object(R.jsx)(q.a.Content,{children:s})})]})})}function Ie(e){var t=Object(a.useContext)(B),n=t.schedule,r=t.updateSchedule,c=t.events,s=Object(U.a)(Array(48).keys()).map((function(e){return Object(R.jsx)(Ce.a.Item,{children:Object(R.jsx)(Ce.a.Link,{eventKey:e,children:"Turn "+(e+1)})},e)})),i=function(e,t){console.log(e,t),r(Object(l.a)(Object(l.a)({},n),{},Object(xe.a)({},e,t.map((function(e){return e.id})))))},o=Object.entries(c).map((function(e){var t=Object(u.a)(e,2);return{id:t[0],name:t[1].displayName}})),d=Object(U.a)(Array(48).keys()).map((function(e){var t=(n[e]||[]).map((function(e){return{id:e,name:c[e].displayName}}));return Object(R.jsx)(q.a.Pane,{eventKey:e,children:Object(R.jsx)(ke.Multiselect,{id:"".concat(e,".events"),selectedValues:t,onSelect:function(t){return i(e,t)},onRemove:function(t){return i(e,t)},options:o,displayValue:"name"})},e)}));return Object(R.jsx)(q.a.Container,{defaultActiveKey:0,children:Object(R.jsxs)(K.a,{children:[Object(R.jsx)(z.a,{id:"action-nav",sm:2,children:Object(R.jsx)(Ce.a,{variant:"pills",className:"flex-column",children:s})}),Object(R.jsx)(z.a,{sm:8,children:Object(R.jsx)(q.a.Content,{children:d})})]})})}function Me(e){var t=Object(a.useContext)(B),n=t.actions,r=t.updateActions,c=t.events,s=t.updateEvents,o=t.schedule,d=t.updateSchedule,j=Object(a.useState)({}),b=Object(u.a)(j,2),h=b[0],O=b[1],f=Object(a.useState)("Some Name"),p=Object(u.a)(f,2),m=p[0],x=p[1];Object(a.useEffect)((function(){var e=localStorage.getItem("saveFiles"),t=JSON.parse(e);t&&O(t)}),[]),Object(a.useEffect)((function(){var e=JSON.stringify(h);localStorage.setItem("saveFiles",e)}),[h]);var g=function(){var e=Object.keys(h).length,t=Object(l.a)(Object(l.a)({},h),{},Object(xe.a)({},e,{name:m,actions:n,events:c,schedule:o,timestamp:Date.now()}));O(t)},v=Object(R.jsxs)("tr",{id:"unsaved-row",children:[Object(R.jsx)("td",{children:Object.keys(h).length}),Object(R.jsx)("td",{children:Object(R.jsx)(ye.a.Control,{type:"text",value:m,onChange:function(e){return x(e.target.value)}})}),Object(R.jsx)("td",{children:"Now"}),Object(R.jsx)("td",{children:Object(R.jsx)(L.a,{onClick:g,children:"Save"})}),Object(R.jsx)("td",{children:"Save to export"}),Object(R.jsx)("td",{children:"Save to launch"})]},"unsaved-row"),y=Object.entries(h).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{children:n}),Object(R.jsx)("td",{children:a.name}),Object(R.jsx)("td",{children:new Date(a.timestamp).toLocaleString()}),Object(R.jsx)("td",{children:Object(R.jsx)(L.a,{onClick:function(){return function(e){g();var t=h[e];r(t.actions),s(t.events),d(t.schedule)}(n)},children:"Load"})}),Object(R.jsx)("td",{children:Object(R.jsx)(L.a,{onClick:function(){return function(e){navigator.clipboard.writeText(JSON.stringify(h[e]))}(n)},children:"Copy to Clipboard"})}),Object(R.jsx)("td",{children:Object(R.jsx)(i.b,{to:"/load-config/".concat(n),target:"_blank",children:"Launch Game"})})]},"save-".concat(n))})).reverse();return Object(R.jsxs)(H.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:"#"}),Object(R.jsx)("th",{children:"Name"}),Object(R.jsx)("th",{children:"Date"}),Object(R.jsx)("th",{children:"Save/Load"}),Object(R.jsx)("th",{children:"Export"}),Object(R.jsx)("th",{children:"Launch"})]})}),Object(R.jsxs)("tbody",{children:[v,y]})]})}var Te=function(e){var t=Object(a.useState)(Object(l.a)({},f)),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(Object(l.a)({},x)),i=Object(u.a)(s,2),o=i[0],d=i[1],j=Object(a.useState)(Object(l.a)({},k)),b=Object(u.a)(j,2),h=b[0],O=b[1];return Object(R.jsx)(B.Provider,{value:{actions:r,updateActions:c,events:o,updateEvents:d,schedule:h,updateSchedule:O},children:Object(R.jsxs)(Q.a,{id:"editor-root",defaultActiveKey:"actions",children:[Object(R.jsx)(q.a,{eventKey:"actions",title:"Actions",children:Object(R.jsx)(Ne,{})},"edit-actions"),Object(R.jsx)(q.a,{eventKey:"events",title:"Events",children:Object(R.jsx)(Ee,{})},"edit-events"),Object(R.jsx)(q.a,{eventKey:"schedule",title:"Schedule",children:Object(R.jsx)(Ie,{})},"edit-schedule"),Object(R.jsx)(q.a,{eventKey:"test",title:"Test Changes",children:Object(R.jsx)(Me,{})},"test")]})})},Pe=function(e){var t=e.match,n=Object(a.useState)(f),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(x),o=Object(u.a)(i,2),d=o[0],j=o[1],h=Object(a.useState)(k),O=Object(u.a)(h,2),p=O[0],m=O[1];Object(a.useEffect)((function(){var e=localStorage.getItem("saveFiles"),n=JSON.parse(e);if(n&&t.params.configId){var a=n[t.params.configId];s(a.actions),j(a.events),m(a.schedule)}}),[t]),console.log(c,d,p);var g=Object(l.a)(Object(l.a)({},M),{},{plugins:[C({initialSchedule:p})]}),v=Object(b.a)({game:g,board:me,numPlayers:1});return Object(R.jsx)(B.Provider,{value:{actions:c,events:d},children:Object(R.jsx)(v,Object(l.a)({},e))})},Ae=function(e){return Object(R.jsxs)(j.c,{children:[Object(R.jsx)(j.a,{exact:!0,path:"/",component:Pe}),Object(R.jsx)(j.a,{exact:!0,path:"/load-config/:configId",component:Pe}),Object(R.jsx)(j.a,{exact:!0,path:"/editor",component:Te})]})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(R.jsx)(i.a,{basename:d,children:Object(R.jsx)(Ae,{})}),document.getElementById("root")),De()}},[[150,1,2]]]);
//# sourceMappingURL=main.cf7eb280.chunk.js.map